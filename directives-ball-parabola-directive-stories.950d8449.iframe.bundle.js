"use strict";(self.webpackChunkcomponents_angular=self.webpackChunkcomponents_angular||[]).push([[652],{"./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>distinctUntilChanged});var _util_identity__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/identity.js"),_util_lift__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");function distinctUntilChanged(comparator,keySelector){return void 0===keySelector&&(keySelector=_util_identity__WEBPACK_IMPORTED_MODULE_0__.D),comparator=null!=comparator?comparator:defaultCompare,(0,_util_lift__WEBPACK_IMPORTED_MODULE_1__.N)((function(source,subscriber){var previousKey,first=!0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_2__._)(subscriber,(function(value){var currentKey=keySelector(value);!first&&comparator(previousKey,currentKey)||(first=!1,previousKey=currentKey,subscriber.next(value))})))}))}function defaultCompare(a,b){return a===b}},"./src/directives/ball-parabola.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>BallParabolaDirective});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/common/fesm2022/dom_tokens-rA0ACyx7.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");let BallParabolaDirective=class BallParabolaDirective{elementRef;document;isAnimationEnabled=!1;targetDomId;finishParabola=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter;clickSubscription=null;BALL_STYLES={initial:{width:"14px",height:"14px",borderRadius:"7px",backgroundColor:"red",position:"absolute",transition:"left 1s, top 1s"},final:{width:"6px",height:"6px",borderRadius:"3px",transition:"left 1s ease-in, top 0.6s linear, width 0.7s linear, height 0.7s linear, borderRadius 0.7s linear"}};ANIMATION_TIMING={initialDelay:20,duration:1500};constructor(elementRef,document){this.elementRef=elementRef,this.document=document}ngAfterViewInit(){this.updateClickSubscription()}ngOnDestroy(){this.unsubscribeClick()}updateClickSubscription(){this.unsubscribeClick(),this.isAnimationEnabled&&(this.clickSubscription=(0,rxjs__WEBPACK_IMPORTED_MODULE_1__.R)(this.elementRef.nativeElement,"click").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.F)()).subscribe((event=>{this.createParabolaBall(event)})))}unsubscribeClick(){this.clickSubscription&&(this.clickSubscription.unsubscribe(),this.clickSubscription=null)}createParabolaBall(event){const ball=this.createBallElement(),targetElement=this.document.getElementById(this.targetDomId);targetElement?(this.positionBall(ball),this.animateBall(ball,targetElement)):console.warn(`Target element with id "${this.targetDomId}" not found`)}createBallElement(){const ball=this.document.createElement("div");return ball.className="parabola-ball",Object.assign(ball.style,this.BALL_STYLES.initial),this.document.body.appendChild(ball),ball}positionBall(ball){const originRect=this.elementRef.nativeElement.getBoundingClientRect();ball.style.top=`${originRect.top}px`,ball.style.left=`${originRect.left+originRect.width/2}px`}animateBall(ball,targetElement){const targetRect=targetElement.getBoundingClientRect();setTimeout((()=>{Object.assign(ball.style,this.BALL_STYLES.final),ball.style.top=targetRect.top-2+"px",ball.style.left=targetRect.left+targetRect.width-3+"px"}),this.ANIMATION_TIMING.initialDelay),setTimeout((()=>{this.document.body.contains(ball)&&this.document.body.removeChild(ball),this.finishParabola.emit()}),this.ANIMATION_TIMING.duration)}static ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef},{type:Document,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Optional},{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Inject,args:[_angular_common__WEBPACK_IMPORTED_MODULE_3__.q]}]}];static propDecorators={isAnimationEnabled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],targetDomId:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],finishParabola:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}]}};BallParabolaDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"[appBallParabola]"})],BallParabolaDirective)},"./stories/directives/ball-parabola.directive.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,Disabled:()=>Disabled,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Directives/BallParabola",component:__webpack_require__("./src/directives/ball-parabola.directive.ts").h,tags:["autodocs"],argTypes:{isAnimationEnabled:{control:"boolean",description:"控制抛物线动画是否启用",defaultValue:!0},targetDomId:{control:"text",description:"目标元素的 DOM ID",defaultValue:"target"},finishParabola:{action:"finishParabola",description:"抛物线动画完成时触发的事件"}},parameters:{docs:{description:{component:"BallParabolaDirective 的 Storybook 配置\n该指令用于创建点击元素到目标元素的抛物线动画效果"}}}},Basic={render:args=>({props:args,template:'\n      <div class="demo-container">\n        \x3c!-- 目标元素 --\x3e\n        <div \n          id="target"\n          class="target-box">\n        </div>\n        \x3c!-- 触发按钮 --\x3e\n        <button \n          appBallParabola\n          [isAnimationEnabled]="isAnimationEnabled"\n          targetDomId="target"\n          (finishParabola)="finishParabola($event)"\n          class="trigger-button">\n          Click Me\n        </button>\n      </div>\n    ',styles:["\n      .demo-container {\n        display: flex;\n        gap: 20px;\n        padding: 20px;\n      }\n      .target-box {\n        width: 50px;\n        height: 50px;\n        background: #2196F3;\n        border-radius: 4px;\n      }\n      .trigger-button {\n        padding: 10px 20px;\n        background: #4CAF50;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        transition: background-color 0.3s ease;\n      }\n      .trigger-button:hover {\n        background: #45a049;\n      }\n    "]}),args:{isAnimationEnabled:!0,targetDomId:"target"}},Disabled={...Basic,args:{isAnimationEnabled:!1,targetDomId:"target"}},__namedExportsOrder=["Basic","Disabled"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:'{\n  render: args => ({\n    props: args,\n    template: `\n      <div class="demo-container">\n        \x3c!-- 目标元素 --\x3e\n        <div \n          id="target"\n          class="target-box">\n        </div>\n        \x3c!-- 触发按钮 --\x3e\n        <button \n          appBallParabola\n          [isAnimationEnabled]="isAnimationEnabled"\n          targetDomId="target"\n          (finishParabola)="finishParabola($event)"\n          class="trigger-button">\n          Click Me\n        </button>\n      </div>\n    `,\n    styles: [`\n      .demo-container {\n        display: flex;\n        gap: 20px;\n        padding: 20px;\n      }\n      .target-box {\n        width: 50px;\n        height: 50px;\n        background: #2196F3;\n        border-radius: 4px;\n      }\n      .trigger-button {\n        padding: 10px 20px;\n        background: #4CAF50;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        transition: background-color 0.3s ease;\n      }\n      .trigger-button:hover {\n        background: #45a049;\n      }\n    `]\n  }),\n  args: {\n    isAnimationEnabled: true,\n    targetDomId: \'target\'\n  }\n}',...Basic.parameters?.docs?.source},description:{story:"基础示例：展示抛物线动画的基本用法\n- 点击按钮触发动画\n- 小球从按钮位置移动到目标位置",...Basic.parameters?.docs?.description}}},Disabled.parameters={...Disabled.parameters,docs:{...Disabled.parameters?.docs,source:{originalSource:"{\n  ...Basic,\n  args: {\n    isAnimationEnabled: false,\n    targetDomId: 'target'\n  }\n}",...Disabled.parameters?.docs?.source},description:{story:"禁用状态示例：展示当 isAnimationEnabled 为 false 时的行为\n- 点击按钮不会触发动画",...Disabled.parameters?.docs?.description}}}}}]);