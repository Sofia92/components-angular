(self.webpackChunkcomponents_angular=self.webpackChunkcomponents_angular||[]).push([[7887],{"./src/components/assets/icon-render.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIH0KICAgIDpob3N0LnJvdW5kIHsKICAgICAgYm9yZGVyLXJhZGl1czoxMDAlOwogICAgfQogICAgOmhvc3Q6bm90KC5yb3VuZCkgewogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICB9CiAgICAuaWNvbi1ib3ggewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIH0KICAgIC5pbWctYm94IHsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIH0KICAgIC5pbWctYm94IGltZyB7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICAgIH0K!./src/components/assets/icon-render.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n:host.round {\n  border-radius: 100%;\n}\n\n:host:not(.round) {\n  border-radius: 4px;\n}\n\n.icon-box {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.img-box {\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.img-box img {\n  max-width: 100%;\n  max-height: 100%;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/assets/icon-select.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=Ci5hbnRpY29ucy1saXN0IHsKICAgIGRpc3BsYXk6IGdyaWQ7CiAgICBncmlkLWF1dG8tcm93czogNDBweDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgNDBweCk7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiAxcHg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIG1heC1oZWlnaHQ6IDIwMHB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbiBhdXRvOwoKICAgIGxpIHsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICB9CiAgICBsaTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICMxMDhBQzk7CiAgICAgIGNvbG9yOiAjZmZmOwogICAgfQogICAgbGkuYWN0aXZlIHsKICAgICAgYmFja2dyb3VuZDogIzM2NjRkOTsKICAgICAgY29sb3I6ICNmZmY7CiAgICB9CiAgICAuaWNvbiB7CiAgICAgIGZvbnQtc2l6ZTogMjRweDsKICAgIH0KICAgIGltZyB7CiAgICAgIG1heC13aWR0aDogMzJweDsKICAgICAgbWF4LWhlaWdodDogMzJweDsKICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgfQp9CgouYmctd3JhcHBlcnsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDEycHg7CiAgICBmbGV4LXdyYXA6IHdyYXA7Cn0KLmJnLWJveHsKICAgICAgcGFkZGluZzogNHB4OwogICAgICBib3JkZXI6IDEuNXB4IHNvbGlkICNmZmY7CiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIH0KLmJnLWJveC5hY3RpdmUgewogICAgYm9yZGVyLWNvbG9yOiAjMzY2NGQ5Owp9Ci5pY29uLWJveHsKICAgIGJhY2tncm91bmQ6IHJnYig1NCwgMTAwLCAyMTcpOwogICAgbWluLXdpZHRoOiAzMnB4OwogICAgbWluLWhlaWdodDogMzJweDsKICAgIG1heC13aWR0aDogNjBweDsKICAgIG1heC1oZWlnaHQ6IDYwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXNpemU6IDIwcHg7Cn0KCi5pY29uLWJveCBpbWd7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIG9iamVjdC1maXQ6IGNvdmVyOwp9Cgo%3D!./src/components/assets/icon-select.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".anticons-list {\n  display: grid;\n  grid-auto-rows: 40px;\n  grid-template-columns: repeat(auto-fill, 40px);\n  align-items: center;\n  gap: 1px;\n  justify-content: center;\n  max-height: 200px;\n  overflow: hidden auto;\n}\n.anticons-list li {\n  cursor: pointer;\n  text-align: center;\n  list-style: none;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n}\n.anticons-list li:hover {\n  background: #108AC9;\n  color: #fff;\n}\n.anticons-list li.active {\n  background: #3664d9;\n  color: #fff;\n}\n.anticons-list .icon {\n  font-size: 24px;\n}\n.anticons-list img {\n  max-width: 32px;\n  max-height: 32px;\n  display: inline-block;\n}\n\n.bg-wrapper {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.bg-box {\n  padding: 4px;\n  border: 1.5px solid #fff;\n  border-radius: 4px;\n}\n\n.bg-box.active {\n  border-color: #3664d9;\n}\n\n.icon-box {\n  background: rgb(54, 100, 217);\n  min-width: 32px;\n  min-height: 32px;\n  max-width: 60px;\n  max-height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 20px;\n}\n\n.icon-box img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/button/button.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'.storybook-button {\n  display: inline-block;\n  cursor: pointer;\n  border: 0;\n  border-radius: 3em;\n  font-weight: 700;\n  line-height: 1;\n  font-family: "Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;\n}\n\n.storybook-button--primary {\n  background-color: #555ab9;\n  color: white;\n}\n\n.storybook-button--secondary {\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;\n  background-color: transparent;\n  color: #333;\n}\n\n.storybook-button--small {\n  padding: 10px 16px;\n  font-size: 12px;\n}\n\n.storybook-button--medium {\n  padding: 11px 20px;\n  font-size: 14px;\n}\n\n.storybook-button--large {\n  padding: 12px 24px;\n  font-size: 16px;\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/conversation-panel/conversation-panel.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,':host {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n\n.conversation-panel {\n  background: #fff;\n  border-radius: 10px;\n  display: grid;\n  grid-template-rows: minmax(0, max-content) minmax(0, 1fr) minmax(0, max-content);\n}\n.conversation-panel .message-content {\n  padding: 4px 16px;\n}\n.conversation-panel .message-content .query {\n  display: grid;\n  grid-template-columns: minmax(0, max-content) 32px;\n  justify-content: flex-end;\n}\n.conversation-panel .message-content .query .content {\n  color: #fff;\n  background-color: #4e89fd;\n}\n.conversation-panel .message-content .answer {\n  display: grid;\n  grid-template-columns: 32px minmax(0, max-content);\n  justify-content: flex-start;\n}\n.conversation-panel .message-content .answer .content {\n  background-color: #f3f4f6;\n}\n.conversation-panel .message-content .answer .content.loading:before {\n  content: "Thinking...";\n  animation: antSwingIn 1s steps(2, start) infinite;\n  margin-left: 4px;\n  vertical-align: baseline;\n}\n.conversation-panel .message-content .answer .workflow {\n  min-width: 300px;\n  margin: 4px 0;\n}\n.conversation-panel .message-content .answer .nodes-wrap {\n  padding: 3px;\n}\n.conversation-panel .message-content .answer .workflow-node {\n  font-size: 14px;\n  background: #fff;\n  padding: 0 10px;\n  border-radius: 4px;\n  align-items: center;\n  margin-top: 4px;\n}\n.conversation-panel .message-content .query .avatar,\n.conversation-panel .message-content .answer .avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.conversation-panel .message-content .query .avatar {\n  background: #E5E7EB;\n  color: #4b5563;\n}\n.conversation-panel .message-content .answer .avatar {\n  background-color: #4e89fd;\n  color: #fff;\n}\n.conversation-panel .message .content {\n  padding: 2px 12px;\n  border-radius: 12px;\n  font-size: 16px;\n}\n.conversation-panel footer {\n  padding: 12px 22px;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  gap: 12px;\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/convert-stream-json/convert-stream-json.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAgIDpob3N0IHsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgfQogICAg!./src/components/convert-stream-json/convert-stream-json.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/deepResearch/components/card/cardTitle.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtc2l6ZTogMS4yNWVtOwogICAgICBmb250LXdlaWdodDogNjAwOwogICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICBtYXJnaW4tYm90dG9tOiAtMS4yNWVtOwogICAgfQogIA%3D%3D!./src/components/deepResearch/components/card/cardTitle.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  font-size: 1.25em;\n  font-weight: 600;\n  line-height: 1.6;\n  margin-bottom: -1.25em;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/deepResearch/components/planCard/planCard.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/deepResearch/components/tools/webSearchToolCall/webSearchToolCall.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/deepResearch/deepResearch.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'@charset "UTF-8";\n:host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n.scroll-container {\n  height: 100%;\n  overflow: hidden auto;\n}\n\n.tabs-list {\n  box-sizing: border-box;\n  margin: 0;\n  height: 38px;\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5715;\n  list-style: none;\n  font-feature-settings: "tnum";\n  display: flex;\n  align-items: center;\n  padding: 2px 8px;\n  color: #4D4D4D;\n  background-color: #F0F0F0;\n  border-radius: 8px;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n.tabs-list .tab-trigger {\n  position: relative;\n  text-align: center;\n  height: 28px;\n  cursor: pointer;\n  transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  border: 0;\n  border-radius: 8px;\n}\n.tabs-list .tab-trigger.active {\n  background: #fff;\n  color: #3664d9;\n}\n.tabs-list .tab-trigger.disabled {\n  color: #999;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n.laptop {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: 520px minmax(0, 1fr);\n  grid-template-rows: 100%;\n  overflow: hidden;\n}\n.laptop > aside {\n  overflow: hidden auto;\n  height: 100%;\n  min-height: 100%;\n  max-height: 100%;\n  border-right: 1px solid #ddd;\n}\n.laptop > main {\n  display: grid;\n  grid-template-columns: 100%;\n  grid-template-rows: max-content minmax(0, 1fr);\n  overflow: hidden;\n  gap: 4px;\n}\n\n::ng-deep .markdown-deep-research > p {\n  margin-bottom: 1.25em;\n  line-height: 26px;\n}\n::ng-deep .markdown-deep-research ul {\n  margin-top: 0.75em;\n  margin-bottom: 0.75em;\n}\n::ng-deep .markdown-deep-research li {\n  list-style-type: disc !important;\n  padding-inline-start: 0.375em;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n}\n::ng-deep .markdown-deep-research hr {\n  margin-block: 2em;\n  height: 0;\n  color: inherit;\n  border-top-width: 1px;\n  border-color: oklch(100% 0 0deg / 0.5);\n}\n::ng-deep .markdown-deep-research table {\n  margin-top: 0;\n  width: 100%;\n  border-collapse: collapse;\n  border-spacing: 0;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  overflow: hidden;\n  background: #fff;\n  font-size: 15px;\n}\n::ng-deep .markdown-deep-research table thead {\n  background-color: #F5F9FF;\n}\n::ng-deep .markdown-deep-research table th,\n::ng-deep .markdown-deep-research table td {\n  padding: 12px;\n  word-break: keep-all;\n}\n::ng-deep .markdown-deep-research table th {\n  color: #374151;\n  font-weight: 600;\n}\n::ng-deep .markdown-deep-research table tr,\n::ng-deep .markdown-deep-research table th {\n  border-bottom: 1px solid #e0e0e0;\n}\n::ng-deep .markdown-deep-research table td {\n  color: #374151;\n}\n::ng-deep .markdown-deep-research table .avatar {\n  width: 20px;\n  height: 20px;\n}\n::ng-deep .markdown-deep-research table i {\n  margin-right: 6px;\n}\n::ng-deep .markdown-deep-research table tbody {\n  max-height: 600px;\n  overflow-y: auto;\n}\n::ng-deep .markdown-deep-research table tbody tr:nth-child(even) {\n  background-color: #F5F9FF;\n}\n::ng-deep .markdown-deep-research table tbody tr:nth-child(odd) {\n  background-color: #fff;\n}\n::ng-deep .markdown-deep-research #key-points + ul,\n::ng-deep .markdown-deep-research #å…³é”®è¦ç‚¹ + ul {\n  background: #f5f5f5;\n  padding: 12px;\n  border-radius: 8px;\n  padding-inline-start: 2em;\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/deerFlow/antvFlow.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'@charset "UTF-8";\nh1 {\n  margin-bottom: 0.888889em;\n  font-size: 2.25em;\n  font-weight: 800;\n  line-height: 1.11111;\n}\n\nh2 {\n  color: inherit;\n  margin-bottom: 1em;\n  font-size: 1.5em;\n  font-weight: 700;\n  line-height: 1.33333;\n}\n\nh3 {\n  font-size: 1.25em;\n  font-weight: 600;\n  line-height: 1.6;\n}\n\n::-webkit-scrollbar {\n  background: #EDEDED;\n  width: 8px;\n  height: 8px;\n}\n\n::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  -webkit-box-shadow: inset 0 0 5px #d8d8d8;\n  background: #d8d8d8;\n}\n\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.2);\n  border-radius: 10px;\n  background: #ffffff;\n}\n\n.card {\n  height: 100%;\n  width: 100%;\n  background: #fff;\n  padding: 12px;\n  border-radius: 10px;\n  border: 1px solid #8595b1;\n  overflow: hidden auto;\n}\n\n.markdown-deep-research > p {\n  margin-bottom: 1.25em;\n  line-height: 26px;\n}\n.markdown-deep-research ul {\n  margin-top: 0.75em;\n  margin-bottom: 0.75em;\n}\n.markdown-deep-research li {\n  list-style-type: disc !important;\n  padding-inline-start: 0.375em;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n}\n.markdown-deep-research hr {\n  margin-block: 2em;\n  height: 0;\n  color: inherit;\n  border-top-width: 1px;\n  border-color: oklch(100% 0 0deg / 0.5);\n}\n.markdown-deep-research table {\n  margin-top: 0;\n  width: 100%;\n  border-collapse: collapse;\n  border-spacing: 0;\n  border: 1px solid #E5E7EB;\n  border-radius: 8px;\n  overflow: hidden;\n  background: #fff;\n  font-size: 15px;\n}\n.markdown-deep-research table thead {\n  background-color: #F5F9FF;\n}\n.markdown-deep-research table th,\n.markdown-deep-research table td {\n  padding: 12px;\n  word-break: keep-all;\n}\n.markdown-deep-research table th {\n  color: #374151;\n  font-weight: 600;\n}\n.markdown-deep-research table tr,\n.markdown-deep-research table th {\n  border-bottom: 1px solid #E5E7EB;\n}\n.markdown-deep-research table td {\n  color: #374151;\n}\n.markdown-deep-research table .avatar {\n  width: 20px;\n  height: 20px;\n}\n.markdown-deep-research table i {\n  margin-right: 6px;\n}\n.markdown-deep-research table tbody {\n  max-height: 600px;\n  overflow-y: auto;\n}\n.markdown-deep-research table tbody tr:nth-child(even) {\n  background-color: #F5F9FF;\n}\n.markdown-deep-research table tbody tr:nth-child(odd) {\n  background-color: #fff;\n}\n.markdown-deep-research #key-points + ul,\n.markdown-deep-research #å…³é”®è¦ç‚¹ + ul {\n  background: #f5f5f5;\n  padding: 12px;\n  border-radius: 8px;\n  padding-inline-start: 2em;\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/deerFlow/deerFlow.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjVweCk7CiAgICB9CiAg!./src/components/deerFlow/deerFlow.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n  width: 100%;\n  height: calc(100vh - 25px);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/form-operator-compact/form-operator-compact.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgLnZhbHVlcyB7CiAgICBkaXNwbGF5OiBmbGV4OwogIH0KICA%3D!./src/components/form-operator-compact/form-operator-compact.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".values {\n  display: flex;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Qp:()=>ButtonComponent,RE:()=>ConversationComponent,Hh:()=>ConvertStreamJsonComponent,S2:()=>DeerFlowComponent,h5:()=>FormOperatorCompactComponent,D4:()=>IconRenderComponent,rg:()=>IconSelectComponent,AT:()=>IconType,B$:()=>LibAutocompleteComponent,TB:()=>SearchBoxComponent,a1:()=>SearchTagComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),icon_select_component=__webpack_require__("./src/components/assets/icon-select.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=Ci5hbnRpY29ucy1saXN0IHsKICAgIGRpc3BsYXk6IGdyaWQ7CiAgICBncmlkLWF1dG8tcm93czogNDBweDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgNDBweCk7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiAxcHg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIG1heC1oZWlnaHQ6IDIwMHB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbiBhdXRvOwoKICAgIGxpIHsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICB9CiAgICBsaTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQ6ICMxMDhBQzk7CiAgICAgIGNvbG9yOiAjZmZmOwogICAgfQogICAgbGkuYWN0aXZlIHsKICAgICAgYmFja2dyb3VuZDogIzM2NjRkOTsKICAgICAgY29sb3I6ICNmZmY7CiAgICB9CiAgICAuaWNvbiB7CiAgICAgIGZvbnQtc2l6ZTogMjRweDsKICAgIH0KICAgIGltZyB7CiAgICAgIG1heC13aWR0aDogMzJweDsKICAgICAgbWF4LWhlaWdodDogMzJweDsKICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgfQp9CgouYmctd3JhcHBlcnsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDEycHg7CiAgICBmbGV4LXdyYXA6IHdyYXA7Cn0KLmJnLWJveHsKICAgICAgcGFkZGluZzogNHB4OwogICAgICBib3JkZXI6IDEuNXB4IHNvbGlkICNmZmY7CiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIH0KLmJnLWJveC5hY3RpdmUgewogICAgYm9yZGVyLWNvbG9yOiAjMzY2NGQ5Owp9Ci5pY29uLWJveHsKICAgIGJhY2tncm91bmQ6IHJnYig1NCwgMTAwLCAyMTcpOwogICAgbWluLXdpZHRoOiAzMnB4OwogICAgbWluLWhlaWdodDogMzJweDsKICAgIG1heC13aWR0aDogNjBweDsKICAgIG1heC1oZWlnaHQ6IDYwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXNpemU6IDIwcHg7Cn0KCi5pY29uLWJveCBpbWd7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIG9iamVjdC1maXQ6IGNvdmVyOwp9Cgo%3D!./src/components/assets/icon-select.component.ts"),icon_select_component_default=__webpack_require__.n(icon_select_component),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");const list_namespaceObject=JSON.parse('[{"group":"png","children":[{"nzType":"","path":"/assets/assets.png","name":"assets.png","isIcon":false,"usingImg":true},{"nzType":"","path":"/assets/images/accessibility.png","name":"accessibility.png","isIcon":false,"usingImg":true}]},{"group":"ico","children":[{"nzType":"","path":"/assets/favicon.ico","name":"favicon.ico","isIcon":false,"usingImg":false}]}]'),DirectionIconNames=["StepBackward","StepForward","FastBackward","FastForward","Shrink","ArrowsAlt","Down","Up","Left","Right","CaretUp","CaretDown","CaretLeft","CaretRight","UpCircle","DownCircle","LeftCircle","RightCircle","DoubleRight","DoubleLeft","VerticalLeft","VerticalRight","VerticalAlignTop","VerticalAlignMiddle","VerticalAlignBottom","Forward","Backward","Rollback","Enter","Retweet","Swap","SwapLeft","SwapRight","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PlayCircle","UpSquare","DownSquare","LeftSquare","RightSquare","Login","Logout","MenuFold","MenuUnfold","BorderBottom","BorderHorizontal","BorderInner","BorderOuter","BorderLeft","BorderRight","BorderTop","BorderVerticle","PicCenter","PicLeft","PicRight","RadiusBottomleft","RadiusBottomright","RadiusUpleft","RadiusUpright","Fullscreen","FullscreenExit"],SuggestionIconNames=["Question","QuestionCircle","Plus","PlusCircle","Pause","PauseCircle","Minus","MinusCircle","PlusSquare","MinusSquare","Info","InfoCircle","Exclamation","ExclamationCircle","Close","CloseCircle","CloseSquare","Check","CheckCircle","CheckSquare","ClockCircle","Warning","IssuesClose","Stop"],EditionIconNames=["Edit","Form","Copy","Scissor","Delete","Snippets","Diff","Highlight","AlignCenter","AlignLeft","AlignRight","BgColors","Bold","Italic","Underline","Strikethrough","Redo","Undo","ZoomIn","ZoomOut","FontColors","FontSize","LineHeight","Dash","SmallDash","SortAscending","SortDescending","Drag","OrderedList","UnorderedList","RadiusSetting","ColumnWidth","ColumnHeight"],CommonIconNames=["Aim","Alert","Api","AppstoreAdd","Apartment","Audio","AudioMuted","Bank","Barcode","Bars","Bell","Block","Border","AccountBook","Branches","Bug","Audit","Calendar","Calculator","Camera","Car","Bulb","Book","CarryOut","Ci","CiCircle","CloudDownload","Cloud","CloudServer","CloudSync","Code","Cluster","CloudUpload","Compress","Compass","ConsoleSql","Appstore","Contacts","Coffee","Container","Control","CopyrightCircle","Clear","Build","Database","Dashboard","DeleteRow","DeliveredProcedure","DeploymentUnit","DeleteColumn","Desktop","Dislike","Disconnect","Comment","DollarCircle","Dollar","BorderlessTable","Ellipsis","EuroCircle","Environment","Exception","Euro","CustomerService","ExpandAlt","Expand","Export","Experiment","EyeInvisible","Eye","Download","FieldBinary","FieldNumber","CreditCard","FieldString","FieldTime","FileExcel","FileExclamation","FileAdd","FileDone","Crown","FileMarkdown","File","FilePdf","FileJpg","FileGif","FileSync","FileProtect","FileSearch","FileUnknown","FileWord","FileText","FileZip","Filter","Flag","Fire","FolderAdd","FolderOpen","Folder","FilePpt","FolderView","Copyright","Fork","Function","FundProjectionScreen","FunnelPlot","Gateway","Gift","Gif","Frown","Global","Gold","Group","Hdd","Heart","Home","FormatPainter","Idcard","Hourglass","Holder","FundView","Inbox","InsertRowLeft","Import","InsertRowAbove","InsertRowRight","Interaction","Laptop","Layout","Insurance","Line","Like","Loading","Loading3Quarters","Lock","MacCommand","Mail","Link","Man","MedicineBox","Meh","Message","Menu","Key","Mobile","MoneyCollect","Monitor","Moon","More","NodeIndex","NodeCollapse","NodeExpand","Merge","Number","MergeCells","Notification","PaperClip","Partition","Muted","OneToOne","PayCircle","Percentage","Picture","PlaySquare","PoundCircle","Pound","Poweroff","Profile","Printer","Project","Product","Phone","PropertySafety","Pushpin","Qrcode","PullRequest","Read","Reconciliation","RedEnvelope","Reload","Rest","Robot","Rocket","RotateRight","SafetyCertificate","RotateLeft","Save","Scan","SecurityScan","Schedule","Select","Send","Shake","Setting","Shop","Shopping","ShoppingCart","Sisternode","Skin","Smile","FileImage","Solution","SplitCells","Signature","Search","Star","Sound","ShareAlt","Sun","Switcher","Sync","Table","Tag","Tablet","Team","Subnode","Thunderbolt","Tags","Tool","TrademarkCircle","ToTop","Translation","Safety","Truck","Unlock","Ungroup","Trademark","Upload","Usb","Trophy","User","UserDelete","UsergroupAdd","UsergroupDelete","Verified","VideoCamera","VideoCameraAdd","UserAdd","History","InsertRowBelow","Wifi","Woman","UserSwitch","Transaction","Wallet"];var IconType,lodash=__webpack_require__("./node_modules/lodash/lodash.js");!function(IconType){IconType.IMAGE="image",IconType.EMOJI="emoji",IconType.ICON="icon"}(IconType||(IconType={}));var common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),ng_zorro_antd_icon=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-icon.mjs");let IconSelectComponent=class IconSelectComponent{icon;iconChange=new core.EventEmitter;filter_icon_type;assets;iconBackgrounds=["inherit","#3664D9","#757575","#8200FF","#0DC4CB","#2DC76D","#FF3143","#FD8701","#FFC900","#FF9900","#FF6600","#FEF7C3"];constructor(){this.assets=[],Object.values(function ngZorroIconCategoryNames(){return{æ–¹å‘æ€§å›¾æ ‡:DirectionIconNames.map((name=>(0,lodash.kebabCase)(name))),æç¤ºå»ºè®®æ€§å›¾æ ‡:SuggestionIconNames.map((name=>(0,lodash.kebabCase)(name))),ç¼–è¾‘ç±»å›¾æ ‡:EditionIconNames.map((name=>(0,lodash.kebabCase)(name))),ç½‘ç«™é€šç”¨å›¾æ ‡:CommonIconNames.map((name=>(0,lodash.kebabCase)(name)))}}()).forEach((icons=>{const groupIcons=icons.map((icon=>({icon_type:IconType.EMOJI,icon,icon_url:null,name:icon+""})));this.assets.push(...groupIcons)})),list_namespaceObject.filter((item=>["png","gif","jpg","svg"].includes(item.group))).forEach((item=>{this.assets.push(...item.children.map((icon=>{const icon_type=icon.usingImg?IconType.IMAGE:IconType.EMOJI;return{icon_type,icon:icon_type==IconType.EMOJI?icon.nzType:null,icon_url:icon_type==IconType.IMAGE?icon.path:null,name:icon.name}})))}))}get valid(){return!!this.icon?.icon_type&&!!this.icon?.icon_background}ngOnInit(){this.icon||(this.icon={icon_type:IconType.EMOJI,icon:this.assets[0].icon,icon_url:"",icon_background:this.iconBackgrounds[1]}),this.filter_icon_type&&(this.assets=this.assets.filter((asset=>this.filter_icon_type!=IconType.IMAGE||asset.icon_type==IconType.IMAGE)))}updateIcon(asset){this.icon?.icon_background||(this.icon.icon_background=this.iconBackgrounds[1]),asset.icon_type==IconType.EMOJI?this.icon={...this.icon,icon_type:IconType.EMOJI,icon:asset.icon,icon_url:""}:this.icon={...this.icon,icon_type:IconType.IMAGE,icon:"",icon_url:asset.icon_url},this.iconChange.emit(this.icon)}updateIconBackground(background){this.icon={...this.icon,icon_background:background},this.iconChange.emit(this.icon)}static ctorParameters=()=>[];static propDecorators={icon:[{type:core.Input}],iconChange:[{type:core.Output}],filter_icon_type:[{type:core.Input}]}};IconSelectComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"icon-select",template:'\n<div class="assets-wrapper">\n  <ul class="anticons-list">\n    <ng-container *ngFor="let item of assets">\n      <li *ngIf="item.icon_type==\'icon\'" [class.active]="icon?.icon==item.icon" (click)="updateIcon(item)">\n        <nz-icon class="icon" [nzType]="item.icon" />\n      </li>\n      <li *ngIf="item.icon_type==\'emoji\'" [class.active]="icon?.icon==item.icon" (click)="updateIcon(item)">\n         <nz-icon class="icon" [nzType]="item.icon" />\n      </li>\n      <li *ngIf="item.icon_type==\'image\'" [class.active]="icon?.icon_url==item.icon_url" (click)="updateIcon(item)">\n        <img [src]="item.icon_url">\n      </li>\n    </ng-container>\n  </ul>\n</div>\n<h3>Choose Style</h3>\n<div *ngIf="icon" class="bg-wrapper">\n  <div class="bg-box cursor-pointer" *ngFor="let background of iconBackgrounds; let i = index"\n  [class.active]="icon.icon_background==background"\n  (click)="updateIconBackground(background)">\n    <span [style.background]="background" class="icon-box">\n      <span *ngIf="icon.icon_type==\'emoji\'" [style.color]="i==0 ? \'#000\' : \'#fff\'"\n        nz-icon [nzType]="icon.icon"></span>\n      <img *ngIf="icon.icon_type==\'image\'" [src]="icon.icon_url">\n    </span>\n  </div>\n</div>\n',imports:[common_module_Dx7dWex5.MD,ng_zorro_antd_icon.Y3],styles:[icon_select_component_default()]})],IconSelectComponent);var icon_render_component=__webpack_require__("./src/components/assets/icon-render.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIH0KICAgIDpob3N0LnJvdW5kIHsKICAgICAgYm9yZGVyLXJhZGl1czoxMDAlOwogICAgfQogICAgOmhvc3Q6bm90KC5yb3VuZCkgewogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICB9CiAgICAuaWNvbi1ib3ggewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIH0KICAgIC5pbWctYm94IHsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIH0KICAgIC5pbWctYm94IGltZyB7CiAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICAgIH0K!./src/components/assets/icon-render.component.ts"),icon_render_component_default=__webpack_require__.n(icon_render_component);let IconRenderComponent=class IconRenderComponent{width=24;icon_background="#F3F4F6";round=!1;icon_type;icon="ðŸ¤–";icon_url;icon_color="#fff";icon_size=16;IconType=IconType;isOriginEmoji=!1;ngOnInit(){this.icon=this.icon||"ðŸ¤–",this.icon_background=this.icon_background||"#F3F4F6",this.isOriginEmoji=!this.icon.startsWith("icons:")&&/\p{Emoji}/u.test(this.icon)}static propDecorators={width:[{type:core.HostBinding,args:["style.width.px"]},{type:core.HostBinding,args:["style.height.px"]},{type:core.Input}],icon_background:[{type:core.HostBinding,args:["style.backgroundColor"]},{type:core.Input}],round:[{type:core.HostBinding,args:["class.round"]},{type:core.Input}],icon_type:[{type:core.Input}],icon:[{type:core.Input}],icon_url:[{type:core.Input}],icon_color:[{type:core.Input}],icon_size:[{type:core.Input}]}};IconRenderComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"icon-render",template:'\n  <ng-container [ngSwitch]="icon_type">\n    <span *ngSwitchCase="IconType.EMOJI" class="icon-box">\n      <i *ngIf="isOriginEmoji">{{icon}}</i>\n      <i *ngIf="!isOriginEmoji" nz-icon [nzType]="icon" [style.color]="icon_color" [style.font-size.px]="icon_size"></i>\n    </span>\n\n    <span *ngSwitchCase="IconType.ICON" class="icon-box">\n      <i *ngIf="isOriginEmoji">{{icon}}</i>\n      <i *ngIf="!isOriginEmoji" nz-icon [nzType]="icon" [style.color]="icon_color" [style.font-size.px]="icon_size"></i>\n    </span>\n\n    <ng-container *ngSwitchCase="IconType.IMAGE">\n      <span class="img-box"><img [src]="icon_url" /></span>\n    </ng-container>\n  </ng-container>\n    ',imports:[common_module_Dx7dWex5.MD,ng_zorro_antd_icon.Y3],styles:[icon_render_component_default()]})],IconRenderComponent);var buttonngResource=__webpack_require__("./src/components/button/button.scss?ngResource"),buttonngResource_default=__webpack_require__.n(buttonngResource);let ButtonComponent=class ButtonComponent{primary=!1;backgroundColor;size="medium";label="Button";onClick=new core.EventEmitter;get classes(){const mode=this.primary?"storybook-button--primary":"storybook-button--secondary";return["storybook-button",`storybook-button--${this.size}`,mode]}static propDecorators={primary:[{type:core.Input}],backgroundColor:[{type:core.Input}],size:[{type:core.Input}],label:[{type:core.Input}],onClick:[{type:core.Output}]}};ButtonComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"storybook-button",imports:[common_module_Dx7dWex5.MD],template:' <button\n  type="button"\n  (click)="onClick.emit($event)"\n  [ngClass]="classes"\n  [ngStyle]="{ \'background-color\': backgroundColor }"\n>\n  {{ label }}\n</button>',styles:[buttonngResource_default()]})],ButtonComponent);var search_box_component=__webpack_require__("./src/components/search-box/search-box.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=Omhvc3R7ZGlzcGxheTppbmxpbmUtZmxleDtoZWlnaHQ6IDI4cHg7Ym94LXNpemluZzogY29udGVudC1ib3g7fQ%3D%3D!./src/components/search-box/search-box.component.ts"),search_box_component_default=__webpack_require__.n(search_box_component),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),ng_zorro_antd_input=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-input.mjs");let SearchBoxComponent=class SearchBoxComponent{keyword="";placeholder="input search text";disabled=!1;width=120;keywordChange=new core.EventEmitter;_keyword$=new Subject.B;constructor(){this._keyword$.pipe((0,distinctUntilChanged.F)(),(0,debounceTime.B)(300)).subscribe((keyword=>{this.keywordChange.emit(keyword)}))}keywordUpdate(keyword){this._keyword$.next(keyword)}submit(){this.keywordChange.emit(this.keyword)}cancel(){this.keyword="",this.keywordChange.emit(this.keyword)}static ctorParameters=()=>[];static propDecorators={keyword:[{type:core.Input}],placeholder:[{type:core.Input}],disabled:[{type:core.Input}],width:[{type:core.Input}],keywordChange:[{type:core.Output}]}};SearchBoxComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"search-box",template:'<nz-input-group class="keywords"\n                 [style.width]="width||\'max-content\'"\n                 [style.height.%]="100"\n                 [nzPrefix]="searchIcon"\n                 [nzSuffix]="clearTpl">\n  <input nz-input\n         [(ngModel)]="keyword"\n         (ngModelChange)="keywordUpdate($event)"\n         [disabled]="disabled"\n         (keyup.enter)="submit()"\n         [placeholder]="placeholder" />\n  <ng-template #searchIcon><i nz-icon\n       nzType="search"></i></ng-template>\n  <ng-template #clearTpl>\n    <span nz-icon\n          *ngIf="keyword"\n          class="ant-input-clear-icon"\n          nzType="close-circle"\n          nzTheme="fill"\n          (click)="cancel()"></span>\n  </ng-template>\n</nz-input-group>\n',imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN,ng_zorro_antd_input.j,ng_zorro_antd_icon.Y3],styles:[search_box_component_default()]})],SearchBoxComponent);var search_tag_component=__webpack_require__("./src/components/search-tag/search-tag.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdHsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDI4cHg7CiAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIH0KICAgIC50YWctZ3JvdXAgewogICAgICBtaW4td2lkdGg6IDIwMHB4OwogICAgICBtYXgtd2lkdGg6IDMwMHB4OwogICAgfQogICAgLnRhZy1pdGVtIHsKICAgICAgbWFyZ2luOiAwOwogICAgfQogICAgLmljb257CiAgICAgIGNvbG9yOiAjZDlkOWQ5OwogICAgfQogICAg!./src/components/search-tag/search-tag.component.ts"),search_tag_component_default=__webpack_require__.n(search_tag_component),ng_zorro_antd_select=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-select.mjs"),ng_zorro_antd_dropdown=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-dropdown.mjs"),ng_zorro_antd_checkbox=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-checkbox.mjs"),ng_zorro_antd_i18n=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-i18n.mjs"),pipes=__webpack_require__("./src/pipes/index.ts");let SearchTagComponent=class SearchTagComponent{i18n;tagList=[];width=150;tagIds=[];tagIdsChange=new core.EventEmitter;checkSet=new Set;constructor(i18n){this.i18n=i18n}get firstTag(){return this.checkSet.size>0?this.tagList.find((tag=>this.checkSet.has(tag.id)))?.name:this.i18n.translate("Role.CommandTagPlaceholder")}get tagsSurfix(){return this.checkSet.size>1?"+ "+(this.checkSet.size-1):""}toggleCheckTag(tagId){this.checkSet.has(tagId)?this.checkSet.delete(tagId):this.checkSet.add(tagId),this.tagIdsChange.emit([...this.checkSet])}clearCheckTags(){this.checkSet.clear(),this.tagIdsChange.emit([...this.checkSet])}static ctorParameters=()=>[{type:ng_zorro_antd_i18n.Og}];static propDecorators={tagList:[{type:core.Input}],width:[{type:core.Input}],tagIds:[{type:core.Input}],tagIdsChange:[{type:core.Output}]}};SearchTagComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-search-tag",template:'<span\n  class="flex bg-white gap-md cursor-pointer bordered full-width full-height padding-sm border-radius"\n  [style.width.px]="width" align="center">\n  <span class="flex gap-xs flex-1 ellipsis" align="center" nz-dropdown [nzDropdownMenu]="menu">\n    <i nz-icon nzType="tags" [nzTheme]="checkSet.size?\'fill\':\'outline\'"></i>\n    <i class="flex-1 text-left ellipsis">{{firstTag}}</i>\n    <i>{{tagsSurfix}}</i>\n  </span>\n  <i *ngIf="checkSet.size" class="icon" nz-icon nzType="close-circle" nzTheme="fill" (click)="clearCheckTags()"></i>\n  <i *ngIf="!checkSet.size" class="icon" nz-icon nzType="down"></i>\n</span>\n\n<nz-dropdown-menu #menu="nzDropdownMenu">\n  <div class="tag-group flex bg-white gap-sm padding-md bordered" vertical>\n    <label class="tag-item ellipsis" *ngFor="let tag of tagList" nz-checkbox [ngModel]="checkSet.has(tag.id)"\n      (ngModelChange)="toggleCheckTag(tag.id)">\n      <span class="ellipsis"><i >{{tag.name}}</i></span>\n    </label>\n  </div>\n</nz-dropdown-menu>',imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN,ng_zorro_antd_select.DH,ng_zorro_antd_icon.Y3,ng_zorro_antd_dropdown.Cu,ng_zorro_antd_checkbox.IJ,pipes.D9],styles:[search_tag_component_default()]})],SearchTagComponent);var form_operator_compact=__webpack_require__("./src/components/form-operator-compact/form-operator-compact.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgLnZhbHVlcyB7CiAgICBkaXNwbGF5OiBmbGV4OwogIH0KICA%3D!./src/components/form-operator-compact/form-operator-compact.ts"),form_operator_compact_default=__webpack_require__.n(form_operator_compact),utils=__webpack_require__("./src/utils/index.ts"),ng_zorro_antd_cascader=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-cascader.mjs"),ng_zorro_antd_date_picker=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-date-picker.mjs"),ng_zorro_antd_input_number=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-input-number.mjs");let FormOperatorCompactComponent=class FormOperatorCompactComponent{dataType;operators;operator;operatorChange=new core.EventEmitter;values=new Array(2);min=void 0;extraOptions=[];isReadonly=!1;valuesChange=new core.EventEmitter;EOperator=utils.O0;ECmpTypeOperatorMap=utils.S$;constructor(){}get isRange(){const currentOperator=this.operators.find((o=>o.value===this.operator));return currentOperator&&currentOperator.isRange||!1}ngOnChanges(changes){const{dataType}=changes;dataType&&dataType.previousValue&&(this.values=new Array(2))}setOperator(operator){this.values=new Array(2),this.operator=operator,this.operatorChange.emit(operator)}updateValue(value,isEndValue){isEndValue?this.values[1]=value:this.values[0]=value,this.valuesChange.emit(this.values)}updateDateRangeValue(){this.valuesChange.emit(this.values)}getDisplayValue(isEndValue){return isEndValue?this.values[1]:this.dataType===utils.S$.date&&Array.isArray(this.values[0])?this.isRange?this.values:this.values[0][0]:this.values[0]}static ctorParameters=()=>[];static propDecorators={dataType:[{type:core.Input}],operators:[{type:core.Input}],operator:[{type:core.Input}],operatorChange:[{type:core.Output}],values:[{type:core.Input}],min:[{type:core.Input}],extraOptions:[{type:core.Input}],isReadonly:[{type:core.Input}],valuesChange:[{type:core.Output}]}};FormOperatorCompactComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"form-operator-compact",template:'<nz-input-group nzCompact\n                 class="values flex-1">\n  <nz-select [(ngModel)]="operator"\n              (ngModelChange)="setOperator($event)"\n              nzPlaceHolder="è¯·é€‰æ‹©"\n              [nzDisabled]="isReadonly"\n              [style.width.px]="84"\n              [nzOptions]="operators">\n  </nz-select>\n  <ng-container *ngTemplateOutlet="valueTpl;context: {$implicit: false, isEndValue:false}"></ng-container>\n  <ng-container *ngIf="isRange&&dataType!==ECmpTypeOperatorMap.date">\n    <input type="text"\n           disabled\n           nz-input\n           placeholder="~"\n           style="width: 30px; border-right: 0; pointer-events: none; background-color: #fff;" />\n    <ng-container *ngTemplateOutlet="valueTpl;context: {$implicit: true, isEndValue:true}"></ng-container>\n  </ng-container>\n</nz-input-group>\n<ng-template #valueTpl\n             let-isEndValue="isEndValue">\n  <ng-container [ngSwitch]="dataType">\n    <nz-input-number *ngSwitchCase="ECmpTypeOperatorMap.number"\n                      class="valueInput flex-1"\n                      [nzDisabled]="isReadonly"\n                      [ngModel]="getDisplayValue(isEndValue)"\n                      (ngModelChange)="updateValue($event,isEndValue)"\n                      [nzMin]="min===undefined?\'null\':min"></nz-input-number>\n    <input *ngSwitchCase="ECmpTypeOperatorMap.char"\n           class="valueInput flex-1"\n           nz-input\n           placeholder="è¯·è¾“å…¥"\n           [ngModel]="getDisplayValue(isEndValue)"\n           (ngModelChange)="updateValue($event,isEndValue)"\n           [disabled]="isReadonly" />\n    <nz-cascader *ngSwitchCase="ECmpTypeOperatorMap.select_cascader"\n                  class="valueInput flex-1"\n                  [nzDisabled]="isReadonly"\n                  [nzOptions]="extraOptions"\n                  [ngModel]="getDisplayValue(isEndValue)"\n                  (ngModelChange)="updateValue($event,isEndValue)"></nz-cascader>\n    <ng-container *ngSwitchCase="ECmpTypeOperatorMap.date">\n      <nz-date-picker *ngIf="!isRange"\n                       class="valueInput flex-1"\n                       [nzDisabled]="isReadonly"\n                       [ngModel]="getDisplayValue(isEndValue)"\n                       (ngModelChange)="updateValue($event,isEndValue)"></nz-date-picker>\n      <nz-range-picker *ngIf="isRange"\n                        class="flex-1"\n                        [nzDisabled]="isReadonly"\n                        nzFormat="yyyy-MM-dd"\n                        [(ngModel)]="values"\n                        (ngModelChange)="updateDateRangeValue($event,isEndValue)">\n      </nz-range-picker>\n    </ng-container>\n    <nz-select *ngSwitchCase="ECmpTypeOperatorMap.select_single"\n                class="valueInput flex-1"\n                [nzDisabled]="isReadonly"\n                [ngModel]="getDisplayValue(isEndValue)"\n                (ngModelChange)="updateValue($event,isEndValue)"\n                nzPlaceHolder="è¯·é€‰æ‹©"\n                [nzOptions]="extraOptions">\n    </nz-select>\n    <nz-select *ngSwitchCase="ECmpTypeOperatorMap.select_multiple"\n                class="valueInput flex-1"\n                [nzDisabled]="isReadonly"\n                [nzMode]="\'multiple\'"\n                [ngModel]="getDisplayValue(isEndValue)"\n                (ngModelChange)="updateValue($event,isEndValue)"\n                nzPlaceHolder="è¯·é€‰æ‹©"\n                [nzOptions]="extraOptions">\n    </nz-select>\n  </ng-container>\n</ng-template>',host:{class:"full-width"},imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN,ng_zorro_antd_input.j,ng_zorro_antd_input_number.G,ng_zorro_antd_select.DH,ng_zorro_antd_date_picker.LE,ng_zorro_antd_cascader.x2],styles:[form_operator_compact_default()]})],FormOperatorCompactComponent);let LibAutocompleteComponent=class LibAutocompleteComponent{eleRef;zone;isComposition=!1;currentValue;actived=!1;isUsingZh;beforeValue="";isCustom=!1;loading=!1;suggestions=[];subSuggestions=[];tips=[];placeholder="";selectedValue;changeEmitter=new core.EventEmitter;changeClickEmitter=new core.EventEmitter;classSelector=!0;constructor(eleRef,zone){this.eleRef=eleRef,this.zone=zone}changeCurrentValue(suggestion,isClick=!1,i){this.currentValue=suggestion,this.changeEmitter.emit(this.currentValue),this.isCustom&&void 0!==i?(this.changeEmitter.emit(this.subSuggestions[i]),isClick&&this.changeClickEmitter.emit(this.subSuggestions[i])):(this.changeEmitter.emit(this.currentValue),isClick&&this.changeClickEmitter.emit(this.currentValue)),this.currentValueChange(this.currentValue),this.resetSuggestionScrollBar()}setDisabledSuggestionList(event){this.eleRef.nativeElement.contains(event.target)||(this.actived=!1)}writeValue(v){void 0!==v&&(this.currentValue=v)}currentValueChange=_=>{};registerOnChange(fn){this.currentValueChange=fn}registerOnTouched(fn){}handleComposition($event){setTimeout((()=>{this.changeCurrentValue($event.target.value),this.isComposition=!1}),0)}handleInput(value){this.actived=!0,this.isComposition||this.changeCurrentValue(value)}resetSuggestionScrollBar(){const suggestionElement=Array.from(this.eleRef.nativeElement.children).find((child=>child.className.includes("suggestion-list")));suggestionElement&&(suggestionElement.scrollTop=0)}static ctorParameters=()=>[{type:core.ElementRef},{type:core.NgZone}];static propDecorators={isCustom:[{type:core.Input}],loading:[{type:core.Input}],suggestions:[{type:core.Input}],subSuggestions:[{type:core.Input}],tips:[{type:core.Input}],placeholder:[{type:core.Input}],selectedValue:[{type:core.Input}],changeEmitter:[{type:core.Output}],changeClickEmitter:[{type:core.Output}],classSelector:[{type:core.HostBinding,args:["class.lib-autocomplete"]}],setDisabledSuggestionList:[{type:core.HostListener,args:["document:click",["$event"]]}]}};LibAutocompleteComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"[LibAutocomplete]",providers:[{provide:fesm2022_forms.kq,useExisting:(0,core.forwardRef)((()=>LibAutocompleteComponent)),multi:!0}],template:'\n    <input type="text"\n           [placeholder]="placeholder"\n           (compositionstart)="isComposition = true; beforeValue = currentValue;"\n           (compositionend)="handleComposition($event)"\n           (focus)="actived=true"\n           [value]="currentValue"\n           (input)="handleInput($event.target.value)"\n    />\n    <div class="suggestion-list" [class.actived]="actived" style="max-height: 200px;overflow: auto;z-index:11"\n         *ngIf="suggestions.length">\n      <ul class="vertical suggestions">\n        <li [class.disabled]="true" *ngIf="loading">\n        <i sds-icon nzType="loading"></i>\n        </li>\n        <li *ngFor="let suggestion of suggestions; let i = index"\n            class="suggestion"\n            [ngClass]="{\'selected-item\': currentValue===suggestion}"\n            (click)="changeCurrentValue(suggestion, true, i); actived = false">\n            <ng-container *ngIf="!isCustom">\n                <span>{{suggestion}}</span>\n                <span *ngIf="subSuggestions[i]" class="sub-suggestion">{{subSuggestions[i]}}</span>\n                <span *ngIf="tips[i]" class="tip">ã€Œ{{tips[i]}}ã€</span>\n            </ng-container>\n            <ng-container *ngIf="isCustom">\n                <span class="sub-suggestion">{{subSuggestions[i]}}</span>\n                <span *ngIf="tips[i]" class="tip">ã€Œ{{tips[i]}}ã€</span>\n            </ng-container>\n        </li>\n      </ul>\n    </div>\n  ',imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN]})],LibAutocompleteComponent);__webpack_require__("./src/components/upload/upload.component.ts");var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),convert_stream_json_component=__webpack_require__("./src/components/convert-stream-json/convert-stream-json.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICAgIDpob3N0IHsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgfQogICAg!./src/components/convert-stream-json/convert-stream-json.component.ts"),convert_stream_json_component_default=__webpack_require__.n(convert_stream_json_component),ng_zorro_antd_message=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-message.mjs"),ng_zorro_antd_upload=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-upload.mjs"),ng_zorro_antd_button=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-button.mjs"),takeUntil=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),directives=__webpack_require__("./src/directives/index.ts");let ConvertStreamJsonComponent=class ConvertStreamJsonComponent extends directives.kd{messageService=(0,core.inject)(ng_zorro_antd_message.xh);loading=!1;file;output;_file$=new Subject.B;beforeUpload=file=>(this.file=file,this._file$.next(file),!0);ngOnInit(){var _this=this;this._file$.pipe((0,takeUntil.Q)(this.destroy$)).subscribe(function(){var _ref=(0,asyncToGenerator.A)((function*(file){_this.output=yield(0,utils.IO)(file)}));return function(_x){return _ref.apply(this,arguments)}}())}};ConvertStreamJsonComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tool-convert-stream-json",template:'\n    <div>\n      <h1>Convert Stream to JSON</h1>\n      <nz-upload\n      [nzAccept]="[\'.txt\']"\n      [nzShowUploadList]="false"\n      [nzBeforeUpload]="beforeUpload">\n    <div class="file">\n      <span>{{file?.name}}</span>\n    </div>\n      <button nz-button>\n        <nz-icon nzType="upload" />\n        Upload\n      </button>\n    </nz-upload>\n    <textarea\n      nz-input\n      *ngIf="output"\n      [ngModel]="output"\n      [nzAutosize]="{ minRows: 2, maxRows: 26 }"\n    ></textarea>\n    </div>\n  ',imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN,ng_zorro_antd_upload.SE,ng_zorro_antd_button.Zw,ng_zorro_antd_icon.Y3,ng_zorro_antd_input.j],styles:[convert_stream_json_component_default()]})],ConvertStreamJsonComponent);var conversation_panel_componentngResource=__webpack_require__("./src/components/conversation-panel/conversation-panel.component.scss?ngResource"),conversation_panel_componentngResource_default=__webpack_require__.n(conversation_panel_componentngResource),ng_zorro_antd_divider=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-divider.mjs"),ng_zorro_antd_skeleton=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-skeleton.mjs"),ngx_markdown=__webpack_require__("./node_modules/ngx-markdown/fesm2022/ngx-markdown.mjs");let ConversationPanelComponent=class ConversationPanelComponent{messages=[];loading={messages:!1};static propDecorators={messages:[{type:core.Input}],loading:[{type:core.Input}]}};ConversationPanelComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"conversation-panel",template:'<div class="conversation-panel full-height messages bordered flex-1 overflow-auto">\n  <ng-content select="[conversationTitle]"></ng-content>\n  <div id="messageContent"\n       class="message-content overflow-auto">\n    <nz-skeleton *ngIf="loading.messages"\n                 [nzActive]="true"></nz-skeleton>\n    <div class="message"\n         *ngFor="let message of messages">\n      <span *ngIf="message.role === \'user\'"\n            class="query gap-md padding-bottom-lg">\n        <i class="content">{{message.query}}</i>\n        <span class="avatar"><i nz-icon\n             nzType="user"></i></span>\n      </span>\n      <span *ngIf="message.role === \'assistant\'"\n            class="answer gap-md padding-bottom-lg">\n        <span class="avatar"><i nz-icon\n             nzType="robot"\n             nzTheme="fill"></i></span>\n        <i class="content"\n           [class.loading]="message.answerLoading">\n          <markdown class="markdown-body"\n                    [data]="message.answer"></markdown>\n        </i>\n      </span>\n    </div>\n  </div>\n  <ng-content select="[conversationFooter]"></ng-content>\n</div>',imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN,ng_zorro_antd_icon.Y3,ng_zorro_antd_skeleton.i3,ng_zorro_antd_divider.g,ng_zorro_antd_input.j,ng_zorro_antd_button.Zw,ngx_markdown.y2],styles:[conversation_panel_componentngResource_default()]})],ConversationPanelComponent);let ConversationComponent=class ConversationComponent{cdr;constructor(cdr){this.cdr=cdr}currentConversation={id:"1",name:"ss"};currentConversationMessages=[];loading={messages:!1};messageMap=new Map;newQuery="";eventSource;eventCount=0;ngOnInit(){this.connectSSE()}ngOnDestroy(){this.disconnectSSE()}connectSSE(){this.eventSource&&this.eventSource.close();try{this.eventSource=new EventSource("http://localhost:3000/api/chat"),this.eventSource.onopen=event=>{this.updateStatus("Connected",!0)},this.eventSource.onmessage=event=>{const{type,content,uid}=JSON.parse(event.data);if("connected"==type)return;const message=this.currentConversationMessages.filter((message=>"assistant"===message.role)).find((message=>message.uid===uid));return message?"message_end"==type?(message.answerLoading=!1,void this.cdr.detectChanges()):void("message"==type&&(message.answer+=content,this.cdr.detectChanges())):void 0},this.eventSource.onerror=event=>{this.updateStatus("Connection error",!1)},this.eventSource.addEventListener("message_end",(event=>{this.updateStatus("Stream completed",!1)}))}catch(error){this.updateStatus("Failed to connect: "+error.message,!1)}}disconnectSSE(){this.eventSource&&(this.eventSource.close(),this.eventSource=null,this.updateStatus("Disconnected",!1))}updateStatus(message,isConnected){const statusDiv=document.getElementById("status");statusDiv&&(statusDiv.textContent=message,statusDiv.className="status "+(isConnected?"connected":"disconnected"))}clearLog(){document.getElementById("eventLog").innerHTML="",this.eventCount=0}sendMessage(){const uid=(0,utils.gZ)();this.currentConversationMessages=this.currentConversationMessages.concat({role:"user",query:this.newQuery,uid}).concat({role:"assistant",uid,answer:"",answerLoading:!0}),fetch("http://localhost:3000/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid,message:this.newQuery})}).finally((()=>this.newQuery=""))}static ctorParameters=()=>[{type:core.ChangeDetectorRef}]};ConversationComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"conversation",template:'\n  <conversation-panel [style.width.px]="400" [style.display]="\'block\'"\n                      [messages]="currentConversationMessages"\n                      [loading]="loading">\n  <header conversationTitle class="flex gap-sm border-bottom padding-sm" align="center" justify="between">\n    <strong class="font-size-lg">{{currentConversation.name}}</strong>\n  </header>\n  <footer conversationFooter class="flex gap-md border-top padding-sm">\n    <input type="text" nz-input placeholder="Chat with AI assistant" \n      (keyup.enter)="sendMessage()" [(ngModel)]="newQuery" />\n    <button nz-button nzType="primary" [disabled]="!newQuery" (click)="sendMessage()">\n      <span nz-icon nzType="send"></span>\n    </button>\n  </footer>\n</conversation-panel>\n',imports:[fesm2022_forms.YN,ConversationPanelComponent,ng_zorro_antd_input.j,ng_zorro_antd_button.Zw,ng_zorro_antd_icon.Y3]})],ConversationComponent);var deerFlow_component=__webpack_require__("./src/components/deerFlow/deerFlow.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjVweCk7CiAgICB9CiAg!./src/components/deerFlow/deerFlow.component.ts"),deerFlow_component_default=__webpack_require__.n(deerFlow_component),module_z3bvLlVg=__webpack_require__("./node_modules/@angular/common/fesm2022/module-z3bvLlVg.mjs"),ng_zorro_antd_spin=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-spin.mjs"),ng_zorro_antd_steps=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-steps.mjs"),asyncIterator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncIterator.js");var DeepResearchMessageType,DeepResearchAgent,DeepResearchRole,DeepResearchFinishReason,deepResearch_componentngResource=__webpack_require__("./src/components/deepResearch/deepResearch.component.scss?ngResource"),deepResearch_componentngResource_default=__webpack_require__.n(deepResearch_componentngResource);!function(DeepResearchMessageType){DeepResearchMessageType.Stream="stream",DeepResearchMessageType.Plan="plan",DeepResearchMessageType.Researcher="researcher",DeepResearchMessageType.Report="report"}(DeepResearchMessageType||(DeepResearchMessageType={})),function(DeepResearchAgent){DeepResearchAgent.Coordinator="coordinator",DeepResearchAgent.Planner="planner",DeepResearchAgent.Researcher="researcher",DeepResearchAgent.Coder="coder",DeepResearchAgent.Reporter="reporter"}(DeepResearchAgent||(DeepResearchAgent={})),function(DeepResearchRole){DeepResearchRole.User="user",DeepResearchRole.Assistant="assistant",DeepResearchRole.Tool="tool"}(DeepResearchRole||(DeepResearchRole={})),function(DeepResearchFinishReason){DeepResearchFinishReason.Stop="stop",DeepResearchFinishReason.ToolCalls="tool_calls",DeepResearchFinishReason.Interrupt="interrupt"}(DeepResearchFinishReason||(DeepResearchFinishReason={}));var awaitAsyncGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js"),wrapAsyncGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js");function fetchStream(_x){return _fetchStream.apply(this,arguments)}function _fetchStream(){return(_fetchStream=(0,wrapAsyncGenerator.A)((function*(url,init={}){const response=yield(0,awaitAsyncGenerator.A)(fetch(url,{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},...init}));if(200!==response.status)throw new Error(`Failed to fetch from ${url}: ${response.status}`);const reader=response.body?.pipeThrough(new TextDecoderStream).getReader();if(!reader)throw new Error("Response body is not readable");let buffer="";for(;;){const{done,value}=yield(0,awaitAsyncGenerator.A)(reader.read());if(done)break;for(buffer+=value;;){const index=buffer.indexOf("\n\n");if(-1===index)break;const chunk=buffer.slice(0,index);buffer=buffer.slice(index+2);const event=parseEvent(chunk);event&&(yield event)}}}))).apply(this,arguments)}function parseEvent(chunk){let resultEvent="message",resultData=null;for(const line of chunk.split("\n")){const pos=line.indexOf(": ");if(-1===pos)continue;const key=line.slice(0,pos),value=line.slice(pos+2);"event"===key?resultEvent=value:"data"===key&&(resultData=value)}if("message"!==resultEvent||null!==resultData)return{event:resultEvent,data:resultData}}var parse=__webpack_require__("./node_modules/best-effort-json-parser/dist/parse.js");function parseJSON(json,fallback){if(!json)return fallback;try{const raw=json.trim().replace(/^```json\s*/,"").replace(/^```js\s*/,"").replace(/^```ts\s*/,"").replace(/^```plaintext\s*/,"").replace(/^```\s*/,"").replace(/\s*```$/,"");return(0,parse.q)(raw)}catch{return fallback}}class DeepResearchStore{_streamMessages=[];planMessages=[];researcherMessages=[];reportMessages=[];responding=!1;graph;key;_subject=new Subject.B;constructor(){this._streamMessages=[],this.planMessages=[],this.researcherMessages=[],this.reportMessages=[]}get isPlanning(){return!this.planMessages?.length}get isResearchering(){return!this.researcherMessages?.length}get isReporting(){return!this.reportMessages?.length}emit(data){this._subject.next(data)}subscribe(callback){this._subject.subscribe(callback)}setResponding(responding){this.responding=responding}setGraph(graph,key){this.graph=graph,this.key=key}getMessage(event){const{type,data}=event,messageId=data.id;let message;if(Object.assign(data,{eventType:type}),message=this._streamMessages.find((message=>message.id===messageId)),message||(message=this.appendMessage(messageId,data)),"tool_call_result"===type&&(message=this._streamMessages.find((message=>message.matchToolCall(data.tool_call_id)))),message)return message.mergeContent(event,this._streamMessages,(args=>this.emit(args))),message}hasMessageId(messageId){return this._streamMessages.some((message=>message.id===messageId))}appendMessage(messageId,data){const message=new DeepResearchMessage({id:messageId,...data,threadId:data.thread_id,isStreaming:!0,graph:this.graph,key:this.key});return this._streamMessages.push(message),message.isPlanner?this.planMessages=this._streamMessages.filter((message=>message.isPlanner)):message.isResearcher||message.isCoder?this.researcherMessages=this._streamMessages.filter((message=>message.isResearcher||message.isCoder)):message.isReporter&&(this.reportMessages=this._streamMessages.filter((message=>message.isReporter))),message.updateGraphNodeText(this._streamMessages),this.emit({type:"plan_loading",data:!this.planMessages?.length}),this.emit({type:"researcher_loading",data:!this.researcherMessages?.length}),this.emit({type:"report_loading",data:!this.reportMessages?.length}),message}}class DeepResearchMessage{id;threadId;eventType;agent;role;content;contentChunks;reasoningContent;reasoningContentChunks;toolCalls;tool_calls;tool_call_chunks;options;finishReason;interruptFeedback;resources;isStreaming=!0;graph;key;planThought;planTitle;planSteps;toolCallResult;tool_call_id;constructor(attr){Object.assign(this,attr),this.content=this.content||"",this.toolCalls=this.toolCalls||[],this.contentChunks=this.contentChunks||[],this.reasoningContentChunks=this.reasoningContentChunks||[]}get isPlanner(){return this.agent===DeepResearchAgent.Planner}get isResearcher(){return this.agent===DeepResearchAgent.Researcher}get isCoder(){return this.agent===DeepResearchAgent.Coder}get isReporter(){return this.agent===DeepResearchAgent.Reporter}get isResearcherToolCalling(){return this.isResearcher&&"tool_call_chunks"===this.eventType&&!this.toolCallResult}get isResearcherToolCalled(){return this.isResearcher&&"tool_call_result"===this.eventType}get originNode(){return this.graph.getNodes().find((node=>node.id===this.key))}matchToolCall(toolCallId){return this.toolCalls.some((toolCall=>toolCall.id===toolCallId))}mergeContent(event,messages,callback){if("message_chunk"===event.type)this._mergeTextMessage(event,messages),this.isPlanner?callback({type:"plan_message_stream",data:!!this.content&&this.isStreaming}):this.isResearcher||this.isCoder?callback({type:"researcher_message_stream",data:!!this.content&&this.isStreaming}):this.isReporter&&callback({type:"report_message_stream",data:!!this.content&&this.isStreaming});else if("tool_calls"===event.type||"tool_call_chunks"===event.type)this._mergeToolCallMessage(event,messages);else if("tool_call_result"===event.type){const sourceToolCall=messages.find((message=>message.toolCalls.find((toolCall=>toolCall.id===event.data.tool_call_id))));sourceToolCall&&(sourceToolCall.toolCallResult=event.data.content),this._mergeToolCallResultMessage(event)}else"interrupt"===event.type&&this._mergeInterruptMessage(event);if(event.data.finish_reason){if(this.finishReason=event.data.finish_reason,this.isStreaming=!1,this.isReporter){const existingNode=this.graph.getNodes().find((node=>node.id===this.id));this.originNode&&this.originNode.setData({ngArguments:{isStreaming:!1,isEnding:!0}}),existingNode&&existingNode.setData({ngArguments:{id:this.id,title:"æœ€ç»ˆå›žç­”",isEnding:!0,isStreaming:!1}})}this.toolCalls&&this.toolCalls.forEach((toolCall=>{toolCall.argsChunks?.length&&(toolCall.args=JSON.parse(toolCall.argsChunks.join("")),delete toolCall.argsChunks)}))}return this.updateGraphNodeText(messages),this.deepClone()}updateGraphNodeText(messages){if(!this.graph)return;if([this.isPlanner,this.isCoder,this.isReporter,this.isResearcher].every((item=>!item)))return;if("tool_calls"==this.eventType)return;const nodes=this.graph.getNodes(),planMessage=messages.find((message=>message.isPlanner)),step=(planMessage?.planSteps||[]).find((step=>step.tool_call_id==this.tool_call_id)),stepIndex=(planMessage?.planSteps||[]).findIndex((step=>step.tool_call_id==this.tool_call_id)),nodeExists=nodeId=>nodes.some((node=>node.id===nodeId));if(this.isPlanner)this.planTitle&&this.originNode&&this.originNode.setData({ngArguments:{id:this.id,title:this.planTitle}}),this.planThought&&this.originNode&&this.originNode.setData({ngArguments:{id:this.id,thought:this.planThought}}),this.planSteps?.length&&this.planSteps.forEach(((step,index)=>{const stepNodeId=step.id,existingStepNode=nodes.find((node=>node.id===stepNodeId));if(existingStepNode)existingStepNode.setData({ngArguments:{id:stepNodeId,title:step.title,description:step.description,isStreaming:this.isStreaming}});else if(!nodeExists(stepNodeId)){this.graph.addNode({id:stepNodeId,shape:"custom-angular-component-node",x:400,y:100*index+50*index,width:350,height:150,data:{ngArguments:{id:stepNodeId,title:step.title,description:step.description,isStreaming:this.isStreaming}}}),this.graph.addEdge({source:{cell:this.key,anchor:{name:"midSide",args:{dx:10}}},target:{cell:stepNodeId,anchor:"left"},connector:{name:"smooth"},attrs:{line:{stroke:"#1890ff",strokeDasharray:5,targetMarker:"classic",style:{animation:"ant-line 30s infinite linear"}}}}).appendLabel({attrs:{text:{text:`step_${index+1}`}}});const cell=this.graph.getCellById(stepNodeId);cell&&this.graph.centerCell(cell)}}));else if(this.isResearcherToolCalled){const existingToolCallNode=nodes.find((node=>node.id===this.id));if(existingToolCallNode)existingToolCallNode.setData({ngArguments:{id:this.id,title:"tool result",description:this.content,isStreaming:this.isStreaming}});else if(!nodeExists(this.id)){let preNodeId=step?.id;if(this.graph.addNode({id:this.id,shape:"custom-angular-component-node",x:900,y:100*stepIndex+50*stepIndex,width:350,height:100,data:{ngArguments:{id:this.id,title:"tool result",description:this.content,isStreaming:this.isStreaming}}}),preNodeId){this.graph.addEdge({source:{cell:preNodeId,anchor:"right"},target:{cell:this.id,anchor:"left"},connector:"smooth",attrs:{line:{stroke:"#1890ff",strokeDasharray:5,targetMarker:"classic",style:{animation:"ant-line 30s infinite linear"}}}}).appendLabel({attrs:{text:{text:step?.title}}});const cell=this.graph.getCellById(this.id);cell&&this.graph.centerCell(cell)}const cell=this.graph.getCellById(this.id);cell&&this.graph.centerCell(cell)}}else if(this.isResearcher){const step=(planMessage?.planSteps||[]).find((step=>step.research_id==this.id)),existingToolCallNode=nodes.find((node=>node.id===this.id));if(existingToolCallNode?existingToolCallNode.setData({ngArguments:{id:this.id,content:this.content,isStreaming:this.isStreaming}}):nodeExists(this.id)||this.graph.addNode({id:this.id,shape:"custom-angular-component-node",x:1350,y:100*stepIndex+50*stepIndex,width:600,height:400,data:{ngArguments:{id:this.id,content:this.content,isStreaming:this.isStreaming}}}),step?.id){this.graph.addEdge({source:{cell:step.id,anchor:"right"},target:{cell:this.id,anchor:"left"},connector:"smooth",attrs:{line:{stroke:"#1890ff",strokeDasharray:5,targetMarker:"classic",style:{animation:"ant-line 30s infinite linear"}}}});const cell=this.graph.getCellById(this.id);cell&&this.graph.centerCell(cell)}const cell=this.graph.getCellById(this.id);cell&&this.graph.centerCell(cell)}else if(this.isReporter){const position=((nodeWidth,nodeHeight,offsetX=0,offsetY=0)=>{if(0===nodes.length)return{x:100,y:100};const isOverlapping=(x,y,width,height)=>nodes.some((node=>{const nodePos=node.position(),nodeSize=node.getSize()||{width:350,height:150};return!(x+width+100<=nodePos.x||nodePos.x+nodeSize.width+100<=x||y+height+100<=nodePos.y||nodePos.y+nodeSize.height+100<=y)})),getLeftRightPositions=(isLeft=!0)=>{const positions=[],startX=isLeft?100:1100;for(let row=0;row<4;row++)for(let col=0;col<2;col++)positions.push({x:startX+col*(nodeWidth+100),y:100+row*(nodeHeight+100)});return positions},leftPositions=getLeftRightPositions(!0);for(const pos of leftPositions){const x=pos.x+offsetX,y=pos.y+offsetY;if(!isOverlapping(x,y,nodeWidth,nodeHeight))return{x,y}}const rightPositions=getLeftRightPositions(!1);for(const pos of rightPositions){const x=pos.x+offsetX,y=pos.y+offsetY;if(!isOverlapping(x,y,nodeWidth,nodeHeight))return{x,y}}const maxX=Math.max(...nodes.map((node=>node.position().x+(node.getSize()?.width||350)))),maxY=Math.max(...nodes.map((node=>node.position().y+(node.getSize()?.height||150))));return{x:Math.max(100,maxX+100+offsetX),y:Math.max(100,maxY+100+offsetY)}})(600,400,1e3,400);nodes.find((node=>node.id===this.id))||(this.graph.addNode({id:this.id,shape:"custom-angular-component-node",x:position.x,y:position.y,width:200,height:80,data:{ngArguments:{title:"æ­£åœ¨æ’°å†™ä¸­",isStreaming:this.isStreaming,type:DeepResearchAgent.Reporter}}}),messages.filter((message=>"message_chunk"===message.eventType&&message.isResearcher&&nodes.find((node=>node.id==message.id)))).forEach((message=>{this.graph.addEdge({source:{cell:message.id,anchor:"right"},target:{cell:this.id,anchor:"left"},connector:"smooth",attrs:{line:{stroke:"#1890ff",strokeDasharray:5,targetMarker:"classic",style:{animation:"ant-line 30s infinite linear"}}}})})))}}_mergeTextMessage(event,messages){if(event.data.content&&(this.content+=event.data.content,this.contentChunks.push(event.data.content)),event.data.reasoning_content&&(this.reasoningContent=(this.reasoningContent??"")+event.data.reasoning_content,this.reasoningContentChunks=this.reasoningContentChunks??[],this.reasoningContentChunks.push(event.data.reasoning_content)),this.isPlanner){const plan=parseJSON(this.content??"",{})||{};plan.thought&&(this.planThought=plan.thought),plan.title&&(this.planTitle=plan.title),plan.steps&&(this.planSteps=plan.steps.map(((step,index)=>({...step,id:step.id??`${this.id}_plan_steps_${index}`}))))}if(this.isResearcher&&!event.data?.finish_reason){const planMessage=messages.find((message=>message.isPlanner));if((planMessage?.planSteps||[]).some((step=>step.research_id==this.id)))return;const step=(planMessage?.planSteps||[]).find((step=>step.need_search&&!step.research_id));step&&(step.research_id=this.id)}}_mergeToolCallMessage(event,messages){const planMessage=messages.find((message=>message.isPlanner));if("tool_calls"===event.type&&event.data.tool_calls[0]?.name){this.toolCalls=event.data.tool_calls.map((raw=>({id:raw.id,name:raw.name,args:raw.args,result:void 0})));const step=(planMessage?.planSteps||[]).find((step=>step.need_search&&!step.tool_call_id));step&&(step.tool_call_id=this.toolCalls[0].id,step.tool_call_result=void 0)}this.toolCalls??=[];for(const chunk of event.data.tool_call_chunks)if(chunk.id){const toolCall=this.toolCalls.find((toolCall=>toolCall.id===chunk.id));toolCall&&(toolCall.argsChunks=[chunk.args]);const step=(planMessage?.planSteps||[]).find((step=>step.tool_call_id==chunk.id));step&&(step.tool_call_result=chunk.args)}else{const streamingToolCall=this.toolCalls.find((toolCall=>toolCall.argsChunks?.length));streamingToolCall&&streamingToolCall.argsChunks.push(chunk.args)}}_mergeToolCallResultMessage(event){const toolCall=this.toolCalls?.find((toolCall=>toolCall.id===event.data.tool_call_id));toolCall&&(toolCall.result=event.data.content);const step=this.planSteps?.find((step=>step.need_search&&!step.search_result));step&&(step.search_result=event.data.content)}_mergeInterruptMessage(event){this.isStreaming=!1,this.options=event.data.options}deepClone(){return JSON.parse(JSON.stringify(this))}}let DeepResearchService=class DeepResearchService{store=new Map;_subject=new Subject.B;constructor(){}setupStore(platformMessageId){this.store.get(platformMessageId)||this.store.set(platformMessageId,new DeepResearchStore)}emit(data){this._subject.next(data)}subscribe(callback){this._subject.subscribe(callback)}handleReferenceSuccess(filename){this.emit({type:"ReferenceFile",data:filename})}static ctorParameters=()=>[]};function _chatStream(){return(_chatStream=(0,wrapAsyncGenerator.A)((function*(userMessage,params,options={}){try{const stream=fetchStream(`/dual/consume?stream_id=${params.stream_id}&last_id=${params.last_id}`,{signal:options.abortSignal});var _iteratorError,_iteratorAbruptCompletion=!1,_didIteratorError=!1;try{for(var _step,_iterator=(0,asyncIterator.A)(stream);_iteratorAbruptCompletion=!(_step=yield(0,awaitAsyncGenerator.A)(_iterator.next())).done;_iteratorAbruptCompletion=!1){const event=_step.value;yield{type:event.event,data:JSON.parse(event.data)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorAbruptCompletion&&null!=_iterator.return&&(yield(0,awaitAsyncGenerator.A)(_iterator.return()))}finally{if(_didIteratorError)throw _iteratorError}}}catch(e){console.error(e)}}))).apply(this,arguments)}function playStream(_x3){return _playStream.apply(this,arguments)}function _playStream(){return(_playStream=(0,wrapAsyncGenerator.A)((function*(url){try{const stream=fetchStream(url);var _iteratorError2,_iteratorAbruptCompletion2=!1,_didIteratorError2=!1;try{for(var _step2,_iterator2=(0,asyncIterator.A)(stream);_iteratorAbruptCompletion2=!(_step2=yield(0,awaitAsyncGenerator.A)(_iterator2.next())).done;_iteratorAbruptCompletion2=!1){const event=_step2.value;yield{type:event.event,data:JSON.parse(event.data)}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorAbruptCompletion2&&null!=_iterator2.return&&(yield(0,awaitAsyncGenerator.A)(_iterator2.return()))}finally{if(_didIteratorError2)throw _iteratorError2}}}catch(e){console.error(e)}}))).apply(this,arguments)}DeepResearchService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],DeepResearchService);var ng_zorro_antd_notification=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-notification.mjs"),ng_zorro_antd_modal=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-modal.mjs");let DeepResearchComponent=class DeepResearchComponent{_deepResearchService;_toastService;nzModalData=(0,core.inject)(ng_zorro_antd_modal.or);activeTab="plan";get isPlay(){return this.nzModalData.isPlay}get url(){return this.nzModalData.url}get streamId(){return this.nzModalData.streamId}get threadId(){return this.nzModalData.threadId}assistantId;get platformMessageId(){return this.nzModalData.platformMessageId}store;planLoading=!1;constructor(_deepResearchService,_toastService){this._deepResearchService=_deepResearchService,this._toastService=_toastService}get hasReport(){return!!this.store?.reportMessages?.length}ngOnInit(){this.store=this._deepResearchService.store.get(this.platformMessageId),this.store&&(this.store.responding||this.store.planMessages?.length||(this._init(),this.store.subscribe((res=>{const{type,data}=res;"plan_loading"===type&&(this.planLoading=data,this.activeTab="plan"),"report_message_stream"!==res.type&&"researcher_message_stream"!==res.type||this.updateReportStatus()}))))}ngOnChanges(){this.store=this._deepResearchService.store.get(this.platformMessageId),this.streamId&&this._init()}onTabChange(value){this.activeTab=value}updateReportStatus(){this.hasReport?this.activeTab="report":this.activeTab="activities"}_init(){var _this=this;return(0,asyncToGenerator.A)((function*(){const streamId=_this.streamId,stream=_this.isPlay?playStream(_this.url):function chatStream(_x,_x2){return _chatStream.apply(this,arguments)}("test",{stream_id:streamId,last_id:"0",thread_id:_this.threadId,interrupt_feedback:void 0,resources:[],auto_accepted_plan:!0,enable_deep_thinking:!1,enable_background_investigation:!0,max_plan_iterations:10,max_step_num:10,max_search_results:10,report_style:"academic",mcp_settings:void 0},{abortSignal:(new AbortController).signal});if(_this.store){_this.store.setResponding(!0);try{var _iteratorError,_iteratorAbruptCompletion=!1,_didIteratorError=!1;try{for(var _step,_iterator=(0,asyncIterator.A)(stream);_iteratorAbruptCompletion=!(_step=yield _iterator.next()).done;_iteratorAbruptCompletion=!1){const event=_step.value;if("message_end"===event.type){_this.store.setResponding(!1);break}_this.store.getMessage(event)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorAbruptCompletion&&null!=_iterator.return&&(yield _iterator.return())}finally{if(_didIteratorError)throw _iteratorError}}}catch(error){_this.store.setResponding(!1),console.log(error),_this._toastService.error("","An error occurred while generating the response. Please try again.")}finally{_this.store.setResponding(!1)}}}))()}static ctorParameters=()=>[{type:DeepResearchService},{type:ng_zorro_antd_notification.xY}];static propDecorators={assistantId:[{type:core.Input}]}};DeepResearchComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"deep-research",template:'<nz-skeleton *ngIf="!store"\n             [nzLoading]="true"></nz-skeleton>\n<section class="laptop"\n         *ngIf="store">\n  <aside class="flex flex-col">\n    <nz-skeleton *ngIf="planLoading"\n                 [nzLoading]="true"></nz-skeleton>\n    <PlanCard *ngFor="let message of store.planMessages"\n              [store]="store"\n              [message]="message"\n              [messageId]="message.id">\n    </PlanCard>\n  </aside>\n  <main>\n    \x3c!-- æ ‡ç­¾é¡µå¤´éƒ¨ --\x3e\n    <header class="flex w-full justify-between px-8">\n      <div class="tabs-list">\n        <button class="tab-trigger px-8"\n                [class.active]="activeTab === \'activities\'"\n                (click)="onTabChange(\'activities\')"> Activities </button>\n        <button class="tab-trigger px-8"\n                [class.active]="activeTab === \'report\'"\n                [class.disabled]="!hasReport"\n                (click)="onTabChange(\'report\')"> Report </button>\n      </div>\n      <deep-research-report-action class="flex justify-center"\n                                   [store]="store"\n                                   [assistantId]="assistantId"></deep-research-report-action>\n    </header>\n    <main class="h-full scroll-container">\n      <nz-skeleton *ngIf="!store?.researcherMessages?.length"\n                   [nzLoading]="true"></nz-skeleton>\n      \x3c!-- æ´»åŠ¨å†…å®¹ --\x3e\n      <div class="tab-content h-full min-h-0 flex-grow"\n           [hidden]="activeTab !== \'activities\'">\n        <div class="scroll-container px-5 h-full">\n          <ResearchActivitiesBlock [store]="store"></ResearchActivitiesBlock>\n        </div>\n      </div>\n      \x3c!-- æŠ¥å‘Šå†…å®¹ --\x3e\n      <div class="tab-content h-full min-h-0 flex-grow"\n           [hidden]="activeTab !== \'report\'">\n        <div class="scroll-container px-5 h-full">\n          <ResearchReportBlock [store]="store"></ResearchReportBlock>\n        </div>\n      </div>\n    </main>\n  </main>\n</section>',standalone:!1,styles:[deepResearch_componentngResource_default()]})],DeepResearchComponent);let MotionDirective=class MotionDirective{_elementRef;initial;animate;transition;hasAnimated=!1;constructor(_elementRef){this._elementRef=_elementRef}ngOnInit(){this.applyStyles(this.initial)}ngAfterViewInit(){setTimeout((()=>this.animateToTarget()),10)}ngOnChanges(changes){this.hasAnimated&&(changes.animate||changes.transition)&&this.animateToTarget()}applyStyles(styles){const el=this._elementRef.nativeElement;if(styles&&(void 0!==styles.opacity&&(el.style.opacity=styles.opacity),void 0!==styles.x||void 0!==styles.y||void 0!==styles.scale)){const x=void 0!==styles.x?styles.x:0,y=void 0!==styles.y?styles.y:0,scale=void 0!==styles.scale?styles.scale:1;el.style.transform=`translate(${x}px, ${y}px) scale(${scale})`}}animateToTarget(){const el=this._elementRef.nativeElement;if(!this.animate)return;let duration=.4,ease="ease-out";if(this.transition&&(this.transition.duration&&(duration=this.transition.duration),this.transition.ease&&(ease=this.transition.ease)),el.style.transition=`opacity ${duration}s ${ease}, transform ${duration}s ${ease}`,void 0!==this.animate.opacity&&(el.style.opacity=this.animate.opacity),void 0!==this.animate.x||void 0!==this.animate.y||void 0!==this.animate.scale){const x=void 0!==this.animate.x?this.animate.x:0,y=void 0!==this.animate.y?this.animate.y:0,scale=void 0!==this.animate.scale?this.animate.scale:1;el.style.transform=`translate(${x}px, ${y}px) scale(${scale})`}this.hasAnimated=!0}static ctorParameters=()=>[{type:core.ElementRef}];static propDecorators={initial:[{type:core.Input}],animate:[{type:core.Input}],transition:[{type:core.Input}]}};MotionDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"[motion]"})],MotionDirective);var format=__webpack_require__("./node_modules/date-fns/esm/format/index.js");let DestroySubscription=class DestroySubscription{destroy$=new Subject.B;ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}};DestroySubscription=(0,tslib_es6.Cg)([(0,core.Directive)()],DestroySubscription);let ReportActionComponent=class ReportActionComponent extends DestroySubscription{assistantId;store;researchId;loading={uploading:!1,downloading:!1};constructor(){super()}get hasReport(){return!!this.store?.reportMessages?.length}get report(){return this.store?.reportMessages[0]}ngOnInit(){}handleDownload(){this.loading.downloading=!0;try{const result=this._blobBuilder();if(!result)return;const{blob,filename}=result,url=URL.createObjectURL(blob),a=document.createElement("a");a.href=url,a.download=filename,document.body.appendChild(a),a.click(),setTimeout((()=>{document.body.removeChild(a),URL.revokeObjectURL(url)}),0)}finally{this.loading.downloading=!1}}handleReference(){const result=this._blobBuilder();if(!result)return;const{blob,filename}=result;new File([blob],filename,{type:"text/markdown"})}_blobBuilder(){if(!this.report)return null;const filename=`research-report-${(0,format.A)(new Date,"yyyy-MM-dd_HH:mm:ss")}.md`;return{blob:new Blob([this.report.content],{type:"text/markdown"}),filename}}static ctorParameters=()=>[];static propDecorators={assistantId:[{type:core.Input}],store:[{type:core.Input}]}};ReportActionComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"deep-research-report-action",template:'\n  <div class="action flex items-center gap-2" *ngIf="hasReport&&!report.isStreaming">\n    <button class="flex items-center" nz-button [nzLoading]="loading.downloading" (click)="handleDownload()">\n      <span nz-icon nzType="download"></span>ä¸‹è½½\n    </button>\n    <button class="flex items-center" nz-button [nzLoading]="loading.uploading" (click)="handleReference()">\n      <span nz-icon nzType="number"></span>å¼•ç”¨\n    </button>\n  </div>\n  ',standalone:!1})],ReportActionComponent);let CardComponent=class CardComponent{className;static propDecorators={className:[{type:core.Input}]}};CardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"Card",template:'\n    <div\n      data-slot="card"\n      class="bg-card text-card-foreground flex flex-col gap-6 py-6 shadow-sm {{className}}"\n    >\n      <ng-content></ng-content>\n    </div>\n  ',standalone:!1})],CardComponent);let CardHeaderComponent=class CardHeaderComponent{className;static propDecorators={className:[{type:core.Input}]}};CardHeaderComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"CardHeader",template:'\n    <div\n      data-slot="card-header"\n      class="@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 {{className}}"\n    >\n      <ng-content></ng-content>\n    </div>\n  ',standalone:!1})],CardHeaderComponent);var cardTitle_component=__webpack_require__("./src/components/deepResearch/components/card/cardTitle.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdCB7CiAgICAgIGZvbnQtc2l6ZTogMS4yNWVtOwogICAgICBmb250LXdlaWdodDogNjAwOwogICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICBtYXJnaW4tYm90dG9tOiAtMS4yNWVtOwogICAgfQogIA%3D%3D!./src/components/deepResearch/components/card/cardTitle.component.ts"),cardTitle_component_default=__webpack_require__.n(cardTitle_component);let CardTitleComponent=class CardTitleComponent{className;static propDecorators={className:[{type:core.Input}]}};CardTitleComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"CardTitle",template:'\n    <div\n      class="leading-none font-semibold {{className}}"\n    >\n      <ng-content></ng-content>\n    </div>\n  ',standalone:!1,styles:[cardTitle_component_default()]})],CardTitleComponent);let CardContentComponent=class CardContentComponent{className;static propDecorators={className:[{type:core.Input}]}};CardContentComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"CardContent",template:'\n    <div data-slot="card-content" class="px-6 {{className}}">\n      <ng-content></ng-content>\n    </div>\n  ',standalone:!1})],CardContentComponent);let CardFooterComponent=class CardFooterComponent{className;static propDecorators={className:[{type:core.Input}]}};CardFooterComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"CardFooter",template:'\n    <div data-slot="card-footer" class="px-6 {{className}}">\n      <ng-content></ng-content>\n    </div>\n  ',standalone:!1})],CardFooterComponent);var planCard_componentngResource=__webpack_require__("./src/components/deepResearch/components/planCard/planCard.component.scss?ngResource"),planCard_componentngResource_default=__webpack_require__.n(planCard_componentngResource);let PlanCardComponent=class PlanCardComponent extends DestroySubscription{_deepResearchService;store;messageId;message;interruptMessage;waitForFeedback;onFeedback;onSendMessage;plan={};constructor(_deepResearchService){super(),this._deepResearchService=_deepResearchService}get shouldShowPlan(){return!!this.message?.content.trim()}ngOnInit(){this.plan=parseJSON(this.message?.content??"",{})||{},this.store.subscribe((res=>{"plan_message_stream"===res.type&&(this.plan=parseJSON(this.message?.content??"",{})||{})}))}handleFeedback(option){"accepted"===option.value?this.handleAccept():this.onFeedback?.(JSON.stringify({option}))}handleStepChange(index){this._deepResearchService.emit({type:"tabSwitch",data:{tab:"activities",index}})}handleAccept(){}static ctorParameters=()=>[{type:DeepResearchService}];static propDecorators={store:[{type:core.Input}],messageId:[{type:core.Input}],message:[{type:core.Input}],interruptMessage:[{type:core.Input}],waitForFeedback:[{type:core.Input}],onFeedback:[{type:core.Input}],onSendMessage:[{type:core.Input}]}};PlanCardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"PlanCard",template:'<div class="w-full">\n  \x3c!-- <ThoughtBlock *ngIf="reasoningContent"\n                content={reasoningContent}\n                isStreaming={isThinking}\n                hasMainContent={hasMainContent}></ThoughtBlock> --\x3e\n  <div *ngIf="shouldShowPlan"\n       motion\n       [initial]="{ opacity: 0, y: 20 }"\n       [animate]="{ opacity: 1, y: 0 }"\n       [transition]="{ duration: 0.3, ease: \'easeOut\' }">\n    <Card className="w-full">\n      <CardHeader>\n        <CardTitle class="px-6">\n          <markdown class="markdown-deep-research fade-in"\n                    [data]="plan.title??\'Deep Research\'"></markdown>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <markdown class="markdown-deep-research transition delay-300 duration-300 opacity-80"\n                  [data]="plan.thought"></markdown>\n        <nz-steps *ngIf="plan.steps?.length"\n                   [nzCurrent]="4"\n                   (nzIndexChange)="handleStepChange($event)"\n                   nzDirection="vertical">\n          <nz-step *ngFor="let step of plan.steps; let i = index"\n                    [nzTitle]="step.title"\n                    [nzDescription]="step.description"></nz-step>\n        </nz-steps>\n      </CardContent>\n      <CardFooter className="flex justify-end">\n        <div *ngIf="!message.isStreaming && interruptMessage?.options?.length"\n             motion\n             [initial]="{ opacity: 0, y: 12 }"\n             [animate]="{ opacity: 1, y: 0 }"\n             [transition]="{ duration: 0.3, delay: 0.3 }"\n             className="flex gap-2">\n          <button *ngFor="let option of interruptMessage?.options"\n                  nz-button\n                  [attr.key]="option.value"\n                  [attr.variant]="option.value === \'accepted\' ? \'default\' : \'outline\'"\n                  [disabled]="!waitForFeedback"\n                  (click)="handleFeedback(option)">{{option.text}} </button>\n        </div>\n      </CardFooter>\n    </Card>\n  </div>\n</div>',standalone:!1,styles:[planCard_componentngResource_default()]})],PlanCardComponent);let PodcastCardComponent=class PodcastCardComponent{className;message;data={};title;audioUrl;isGenerating=!1;hasError=!1;isPlaying=!1;ngOnChanges(changes){changes.message&&this.parseMessage()}parseMessage(){if(this.message?.content)try{this.data=JSON.parse(this.message.content),this.title=this.data?.title,this.audioUrl=this.data?.audioUrl,this.isGenerating=this.message.isStreaming||!1,this.hasError=void 0!==this.data?.error}catch(error){this.data={},this.hasError=!0}else this.data={}}setIsPlaying(playing){this.isPlaying=playing}getDownloadFilename(){return(this.title||"podcast").replace(/ /g,"-")+".mp3"}static propDecorators={className:[{type:core.Input}],message:[{type:core.Input}]}};PodcastCardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"PodcastCard",template:'\n    <Card [class]="\'w-[508px] \' + (className || \'\')">\n      <CardHeader>\n        <div class="text-muted-foreground flex items-center justify-between text-sm">\n          <div class="flex items-center gap-2">\n            <div *ngIf="isGenerating; else headphonesIcon">\n              <span sds-icon nzType="loading"></span>\n            </div>\n            <ng-template #headphonesIcon>\n              <span sds-icon nzType="headphones"></span>\n            </ng-template>\n            \n            <div *ngIf="!hasError; else errorMessage">\n            \x3c!-- <RainbowText animated={isGenerating}> --\x3e\n              <span>\n                {{ isGenerating ? "Generating podcast..." : \n                   (isPlaying ? "Now playing podcast..." : "Podcast") }}\n              </span>\n            </div>\n            <ng-template #errorMessage>\n              <div class="text-red-500">\n                Error when generating podcast. Please try again.\n              </div>\n            </ng-template>\n          </div>\n          \n          <div *ngIf="!hasError && !isGenerating" class="flex">\n            \n              <button sds-tooltip nzTooltipTitle="Download podcast" sds-button variant="ghost" size="icon" asChild>\n                <a [href]="audioUrl" \n                   [download]="getDownloadFilename()">\n                  <span sds-icon nzType="download" [style.font-size.px]="16" ></span>\n                </a>\n              </button>\n          </div>\n        </div>\n        \n        <CardTitle>\n          <div class="text-lg font-medium">\n          \x3c!-- <RainbowText animated={isGenerating}> --\x3e\n              {{ title }}\n          </div>\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent>\n        <audio *ngIf="audioUrl; else emptyDiv"\n               class="w-full"\n               [src]="audioUrl"\n               controls\n               (play)="setIsPlaying(true)"\n               (pause)="setIsPlaying(false)">\n        </audio>\n        <ng-template #emptyDiv>\n          <div class="w-full"></div>\n        </ng-template>\n      </CardContent>\n    </Card>\n  ',standalone:!1})],PodcastCardComponent);let ResearchReportBlockComponent=class ResearchReportBlockComponent{store;activitiesContainer;report;shouldAutoScroll=!1;_scrollTimeout;constructor(){}ngOnInit(){this.report=this.store?.reportMessages[0]||{},this.store.subscribe((res=>{"report_message_stream"===res.type&&(this.report=this.store.reportMessages[0])}))}ngAfterViewChecked(){this.store?.responding&&this.report?.content?.length&&this.report?.isStreaming?(this.shouldAutoScroll=!0,this.scrollToBottom()):(this.shouldAutoScroll=!1,this._scrollTimeout&&clearTimeout(this._scrollTimeout))}scrollToBottom(){if(this.activitiesContainer){const container=this.activitiesContainer.nativeElement,scrollContainer=this.findScrollContainer(container);scrollContainer&&(this._scrollTimeout=setTimeout((()=>{scrollContainer.scrollTop=scrollContainer.scrollHeight}),100))}}findScrollContainer(element){let current=element;for(;current&&current!==document.body;){const style=window.getComputedStyle(current),overflow=style.overflow+style.overflowY;if(overflow.includes("scroll")||overflow.includes("auto"))return current;current=current.parentElement}return element.closest(".scroll-container")||element.closest(".tab-content")}static ctorParameters=()=>[];static propDecorators={store:[{type:core.Input}],activitiesContainer:[{type:core.ViewChild,args:["activitiesContainer",{static:!1}]}]}};ResearchReportBlockComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"ResearchReportBlock",template:'\n    <div class="w-full pt-4 pb-8" #activitiesContainer>\n          <markdown katex class="markdown-deep-research transition delay-300 duration-300" [data]="report?.content"></markdown>\n          <nz-spin *ngIf="report?.isStreaming" class="my-12"></nz-spin>\n    </div>\n  ',standalone:!1})],ResearchReportBlockComponent);let ResearchActivitiesBlockComponent=class ResearchActivitiesBlockComponent extends DestroySubscription{store;activitiesContainer;__pageCache=new Map;messages=[];shouldAutoScroll=!1;_scrollTimeout;constructor(){super()}ngOnInit(){this.messages=this.store?.researcherMessages||[],this.store.subscribe((res=>{"researcher_message_stream"===res.type&&(this.messages=this.store.researcherMessages)}))}ngAfterViewChecked(){if(this.store?.responding&&this.messages?.length)this.shouldAutoScroll=!0,this.scrollToBottom();else{if(!this.shouldAutoScroll)return;this.shouldAutoScroll=!1,this._scrollTimeout&&clearTimeout(this._scrollTimeout)}}scrollToBottom(){if(this.activitiesContainer){const container=this.activitiesContainer.nativeElement,scrollContainer=this.findScrollContainer(container);scrollContainer&&(this._scrollTimeout=setTimeout((()=>{scrollContainer.scrollTop=scrollContainer.scrollHeight}),100))}}findScrollContainer(element){let current=element;for(;current&&current!==document.body;){const style=window.getComputedStyle(current),overflow=style.overflow+style.overflowY;if(overflow.includes("scroll")||overflow.includes("auto"))return current;current=current.parentElement}return element.closest(".scroll-container")||element.closest(".tab-content")}static ctorParameters=()=>[];static propDecorators={store:[{type:core.Input}],activitiesContainer:[{type:core.ViewChild,args:["activitiesContainer",{static:!1}]}]}};ResearchActivitiesBlockComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"ResearchActivitiesBlock",template:'\n<main class="flex flex-col py-4"\n    #activitiesContainer>\n  <ng-container *ngFor="let message of messages; let i = index; let last = last">\n    <div class="message-enter"\n        [style]="{ animationDelay: (i * 0.1) + \'s\' }"\n        motion\n        [attr.id]="message.id"\n        [initial]="{ opacity: 0, y: 24 }"\n        [animate]="{ opacity: 1, y: 0 }"\n        [transition]="{ duration: 0.4, ease: \'easeOut\' }">\n        <div className="px-4 py-2 hover-lift">\n          <markdown class="markdown-deep-research fade-in transition delay-300 duration-300"\n                    [data]="message.content"></markdown>\n        </div>\n        <nz-spin *ngIf="message?.isStreaming" class="my-12"></nz-spin>\n        <ng-container *ngFor="let toolCall of message.toolCalls">\n          <ng-container [ngSwitch]="toolCall.name">\n            <tool-call-web-search *ngSwitchCase="\'web_search\'"\n                                  [toolCall]="toolCall"\n                                  [result]="toolCall.result"\n                                  [__pageCache]="__pageCache"></tool-call-web-search>\n            <tool-call-crawl *ngSwitchCase="\'crawl_tool\'"\n                              [toolCall]="toolCall"\n                              [result]="toolCall.result"\n                              [__pageCache]="__pageCache"></tool-call-crawl>\n            <tool-call-retriever *ngSwitchCase="\'retriever\'"\n                                 [toolCall]="toolCall"\n                                 [result]="toolCall.result"></tool-call-retriever>\n            <tool-call-python *ngSwitchCase="\'python_repl_tool\'"\n                              [toolCall]="toolCall"\n                              [result]="toolCall.result"></tool-call-python>\n            <tool-call-retriever *ngSwitchCase="\'local_search_tool\'"\n                                 [toolCall]="toolCall"\n                                 [result]="toolCall.result"></tool-call-retriever>\n            <tool-call-mcp *ngSwitchDefault\n                           [toolCall]="toolCall"></tool-call-mcp>\n          </ng-container>\n        </ng-container>\n    </div>\n    <nz-divider *ngIf="!last"\n                style="margin: 16px 0; border-width: 1px;"></nz-divider>\n  </ng-container>\n</main>\n',standalone:!1})],ResearchActivitiesBlockComponent);let DeepResearchButtonComponent=class DeepResearchButtonComponent{nzModal;i18n;_deepResearchService;platformMessageId;streamId;threadId;assistantId;constructor(nzModal,i18n,_deepResearchService){this.nzModal=nzModal,this.i18n=i18n,this._deepResearchService=_deepResearchService}get store(){return this._deepResearchService.store.get(this.platformMessageId)}get isResponding(){return this.store?.responding}get report(){return this.store?.reportMessages[0]||{}}ngOnChanges(changes){changes.platformMessageId&&this._deepResearchService.setupStore(this.platformMessageId)}deepResearchClick(){this.nzModal.create({nzTitle:this.i18n.translate("DeepResearch.Title"),nzContent:DeepResearchComponent,nzFooter:null,nzWidth:"80vw",nzBodyStyle:{height:"80vh",overflow:"hidden auto",padding:"0"},nzMaskClosable:!1,nzData:{streamId:this.streamId.startsWith("stream:")?this.streamId:`stream:${this.streamId}`,threadId:this.threadId,platformMessageId:this.platformMessageId,assistantId:this.assistantId}}).afterClose.subscribe((res=>{}))}static ctorParameters=()=>[{type:ng_zorro_antd_modal.N_},{type:ng_zorro_antd_i18n.Og},{type:DeepResearchService}];static propDecorators={platformMessageId:[{type:core.Input}],streamId:[{type:core.Input}],threadId:[{type:core.Input}],assistantId:[{type:core.Input}]}};DeepResearchButtonComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"cmp-deep-research",template:'\n  <button class="cursor-pointer bg-white box-border border-indigo-600 rounded-full h-10 border-1 flex gap-2 items-center justify-center px-4" (click)="deepResearchClick()">\n    <img src="/assets/images/assistant/deepresearch-logo.png" class="w-5 h-5"> \n    <span class="text-sm">{{(!!report && !report.isStreaming?\'DeepResearchCompleted\':\'DeepResearchIng\')}}</span>\n    <span class="relative flex size-3" *ngIf="isResponding">\n      <span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-sky-400 opacity-75"></span>\n      <span class="relative inline-flex size-3 rounded-full bg-sky-500"></span>\n    </span>\n    <span *ngIf="!!report && !report.isStreaming" nz-icon nzType="check-circle" nzTheme="fill" class="text-green-500"></span>\n  </button>\n  <deep-research-report-action *ngIf="store" [store]="store" [assistantId]="assistantId"></deep-research-report-action>\n  ',standalone:!1})],DeepResearchButtonComponent);var ng_zorro_antd_collapse=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-collapse.mjs");var webSearchToolCall_componentngResource=__webpack_require__("./src/components/deepResearch/components/tools/webSearchToolCall/webSearchToolCall.component.scss?ngResource"),webSearchToolCall_componentngResource_default=__webpack_require__.n(webSearchToolCall_componentngResource);let WebSearchToolCallComponent=class WebSearchToolCallComponent{toolCall;result=[];__pageCache;tempSearchPlaceholder=[...Array(6)];searching=!1;searchResults=[];pageResults=[];imageResults=[];ngOnChanges(changes){this.searching=void 0===this.toolCall.result,this.parseSearchResults(),this.pageResults=this.searchResults?.filter((result=>"page"===result.type)),this.imageResults=this.searchResults?.filter((result=>"image"===result.type))}parseSearchResults(){let results;try{results=this.toolCall.result?parseJSON(this.toolCall.result,[]):void 0}catch{results=void 0}Array.isArray(results)?results.forEach((result=>{"page"===result.type&&this.__pageCache.set(result.url,result.title)})):results=[],this.searchResults=results}static propDecorators={toolCall:[{type:core.Input}],result:[{type:core.Input}],__pageCache:[{type:core.Input}]}};WebSearchToolCallComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tool-call-web-search",template:'<section class="mt-4 pl-4">\n  <div class="font-medium italic">\n    <p class="flex items-center"\n       [class.animated]="searchResults === undefined">\n      \x3c!-- <Search size={16} class="mr-2" /> --\x3e\n      <span>Searching for&nbsp;</span>\n      <span class="max-w-[500px] overflow-hidden text-ellipsis whitespace-nowrap">\n        {{(toolCall.args).query}}\n      </span>\n    </p>\n  </div>\n  <div class="pr-4">\n    <main *ngIf="pageResults"\n          class="mt-2 flex flex-wrap gap-4">\n      <ng-container *ngIf="searching">\n        <div *ngFor="let _ of tempSearchPlaceholder; let i = index"\n             [attr.key]="\'search-result-\' + i"\n             class="flex h-40 w-40 gap-2 rounded-md text-sm">\n          \x3c!-- <Skeleton class="to-accent h-full w-full rounded-md bg-gradient-to-tl from-slate-400"\n                    [style.animation-delay]="i * 0.2 + \'s\'" /> --\x3e\n        </div>\n      </ng-container>\n      <ng-container *ngFor="let searchResult of pageResults; let i = index">\n        <div *ngIf="searchResult.type === \'page\'"\n             motion\n             class="text-muted-foreground bg-accent flex max-w-40 gap-2 rounded-md px-2 py-1 text-sm"\n             [initial]=" {opacity: 0, y: 10, scale: 0.66} "\n             [animate]=" {opacity: 1, y: 0, scale: 1} "\n             [transition]="{duration: 0.2,delay: i * 0.1,ease: \'easeOut\'}">\n          \x3c!-- <FavIcon\n                    class="mt-1"\n                    [url]="searchResult.url"\n                    [title]="searchResult.title"\n                  /> --\x3e\n          <a [href]="searchResult.url"\n             target="_blank">\n            {{searchResult.title}}\n          </a>\n        </div>\n      </ng-container>\n      <div *ngFor="let searchResult of imageResults; let i = index"\n           motion\n           [initial]="{ opacity: 0, y: 10, scale: 0.66 }"\n           [animate]="{ opacity: 1, y: 0, scale: 1 }"\n           [transition]="{duration: 0.2,delay: i * 0.1,ease: \'easeOut\'}">\n        <a class="flex flex-col gap-2 overflow-hidden rounded-md opacity-75 transition-opacity duration-300 hover:opacity-100"\n           [href]="searchResult.image_url"\n           target="_blank">\n          <img [src]="searchResult.image_url"\n               [alt]="searchResult.image_description"\n               class="bg-accent h-40 w-40 max-w-full rounded-md bg-cover bg-center bg-no-repeat"\n               [class.hover:scale-110]="true"\n               [class.imageTransition]="true" />\n        </a>\n      </div>\n    </main>\n  </div>\n</section>',standalone:!1,styles:[webSearchToolCall_componentngResource_default()]})],WebSearchToolCallComponent);let CrawlToolCallComponent=class CrawlToolCallComponent{toolCall;result=[];__pageCache;url="";title;ngOnChanges(){this.url=this.toolCall.args.url,this.title=this.__pageCache.get(this.url)}static propDecorators={toolCall:[{type:core.Input}],result:[{type:core.Input}],__pageCache:[{type:core.Input}]}};CrawlToolCallComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tool-call-crawl",template:'\n  <section class="mt-4 pl-4">\n  <div>\n    <p class="flex items-center text-base font-medium italic"\n       [class.animated]="toolCall.result === undefined">\n      \x3c!-- <BookOpenText size={16} class={"mr-2"} /> --\x3e\n      <span>Reading</span>\n    </p>\n  </div>\n  <ul class="mt-2 flex flex-wrap gap-4">\n    <li class="text-muted-foreground bg-accent flex h-40 w-40 gap-2 rounded-md px-2 py-1 text-sm"\n        motion\n        [initial]="{ opacity: 0, y: 10, scale: 0.66 }"\n        [animate]="{ opacity: 1, y: 0, scale: 1 }"\n        [transition]="{ duration: 0.2,ease: \'easeOut\' }">\n      \x3c!-- <FavIcon class="mt-1" url={url} title={title} /> --\x3e\n      <a class="h-full flex-grow overflow-hidden text-ellipsis whitespace-nowrap"\n         [href]="url"\n         target="_blank">\n        {{title ?? url}}\n      </a>\n    </li>\n  </ul>\n</section>\n',standalone:!1})],CrawlToolCallComponent);let RetrieverToolCallComponent=class RetrieverToolCallComponent{toolCall;result=[];searching=!1;documents=[];ngOnChanges(){this.searching=void 0===this.toolCall.result,this.documents=this.toolCall.result?parseJSON(this.toolCall.result,[]):[]}static propDecorators={toolCall:[{type:core.Input}],result:[{type:core.Input}]}};RetrieverToolCallComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tool-call-retriever",template:'\n<section class="mt-4 pl-4">\n      <div class="font-medium italic">\n        <p class="flex items-center" [class.animated]="searching">\n          \x3c!-- <Search size={16} class={"mr-2"} /> --\x3e\n          <span>Retrieving documents from RAG&nbsp;</span>\n          <span class="max-w-[500px] overflow-hidden text-ellipsis whitespace-nowrap">\n            {{(toolCall.args).keywords}}\n          </span>\n        </p>\n      </div>\n      <div class="pr-4">\n          <main *ngIf="documents" class="mt-2 flex flex-wrap gap-4">\n          <ng-container *ngIf="searching">\n              <div *ngFor="let i of [0, 1]" class="flex h-40 w-40 gap-2 rounded-md text-sm">\n                <div class="to-accent h-full w-full rounded-md bg-gradient-to-tl from-slate-400" [style.animation-delay]="i * 0.2 + \'s\'"></div>\n              </div>\n            </ng-container>\n              <div\n                *ngFor="let doc of documents; let i = index"\n                motion\n                [attr.key]="\'search-result-\' + i"\n                class="text-muted-foreground bg-accent flex max-w-40 gap-2 rounded-md px-2 py-1 text-sm"\n                [initial]="{ opacity: 0, y: 10, scale: 0.66 }"\n                [animate]="{ opacity: 1, y: 0, scale: 1 }"\n                [transition]="{duration: 0.2,delay: i * 0.1,ease: \'easeOut\'}">\n                \x3c!-- <FileText size={32} /> --\x3e\n                {{doc.title}}\n              </div>\n          </main>\n      </div>\n    </section>\n  ',standalone:!1})],RetrieverToolCallComponent);let PythonToolCallComponent=class PythonToolCallComponent{toolCall;result=[];code="";ngOnChanges(){this.code=this.toolCall.args.code}static propDecorators={toolCall:[{type:core.Input}],result:[{type:core.Input}]}};PythonToolCallComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tool-call-python",template:'\n<section class="mt-4 pl-4">\n      <div class="flex items-center">\n        <p\n          class="text-base font-medium italic"\n          [class.animated]="!toolCall.result">\n          Running Python code\n        </p>\n      </div>\n      <div>\n        <div class="bg-accent mt-2 max-h-[400px] max-w-[calc(100%-120px)] overflow-y-auto rounded-md p-2 text-sm">\n          <pre *ngIf="code?.trim()" class="transition duration-700 ease-in-out">\n            <code class="hljs" codeHighlight [innerHTML]="code"></code>\n          </pre>\n        </div>\n      </div>\n      <tool-call-python-result *ngIf="toolCall.result" [result]="toolCall.result" ></tool-call-python-result>\n    </section>\n',standalone:!1})],PythonToolCallComponent);let PythonToolCallResultComponent=class PythonToolCallResultComponent{result;hasError=!1;error=null;stdout=null;ngOnChanges(){if(this.hasError=this.result.includes("Error executing code:\n"),this.hasError){const parts=this.result.split("```\nError: ");parts.length>1&&(this.error=parts[1].trim())}if(!this.hasError){const parts=this.result.split("```\nStdout: ");parts.length>1&&(this.stdout=parts[1].trim())}}static propDecorators={result:[{type:core.Input}]}};PythonToolCallResultComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tool-call-python-result",template:'\n  <div class="mt-4 font-medium italic">\n    {{hasError ? "Error when executing the above code" : "Execution output"}}\n  </div>\n  <div class="bg-accent mt-2 max-h-[400px] max-w-[calc(100%-120px)] overflow-y-auto rounded-md p-2 text-sm">\n    <pre class="transition duration-700 ease-in-out">\n      <code class="hljs" codeHighlight [innerHTML]="error ?? stdout ?? \'(empty)\'"></code>\n    </pre>\n  </div>\n',standalone:!1})],PythonToolCallResultComponent);let McpToolCallComponent=class McpToolCallComponent{toolCall;tool;ngOnChanges(){this.tool=this.findMCPTool(this.toolCall.name)}findMCPTool(name){const mcpServers=[];for(const server of mcpServers)for(const tool of server.tools)if(tool.name===name)return tool;return null}static propDecorators={toolCall:[{type:core.Input}]}};McpToolCallComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"tool-call-mcp",template:'\n  <div class="overflow-y-auto w-full">\n    <nz-collapse class="w-full" nzGhost>\n      <nz-collapse-panel value="item-1" [nzHeader]="toolCall.name">\n        <div *ngIf="toolCall.result" class="h-full w-full overflow-y-auto text-sm">\n          <pre>{{toolCall.result}}</pre>\n        </div>\n      </nz-collapse-panel>\n    </nz-collapse>\n  </div>\n',standalone:!1})],McpToolCallComponent);let ToolsModule=class ToolsModule{};ToolsModule=(0,tslib_es6.Cg)([(0,core.NgModule)({declarations:[WebSearchToolCallComponent,CrawlToolCallComponent,RetrieverToolCallComponent,PythonToolCallComponent,PythonToolCallResultComponent,McpToolCallComponent],imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN,MotionDirective,ng_zorro_antd_collapse.GB,directives.vr],exports:[WebSearchToolCallComponent,CrawlToolCallComponent,RetrieverToolCallComponent,PythonToolCallComponent,PythonToolCallResultComponent,McpToolCallComponent]})],ToolsModule);let DeepResearchModule=class DeepResearchModule{};DeepResearchModule=(0,tslib_es6.Cg)([(0,core.NgModule)({declarations:[DeepResearchButtonComponent,DeepResearchComponent,CardComponent,CardHeaderComponent,CardTitleComponent,CardContentComponent,CardFooterComponent,PlanCardComponent,PodcastCardComponent,ResearchReportBlockComponent,ResearchActivitiesBlockComponent,ReportActionComponent],imports:[common_module_Dx7dWex5.MD,fesm2022_forms.YN,ng_zorro_antd_icon.Y3,ng_zorro_antd_button.Zw,ng_zorro_antd_skeleton.i3,ng_zorro_antd_steps.Qb,ng_zorro_antd_divider.g,MotionDirective,ng_zorro_antd_spin.V,ToolsModule,ngx_markdown.NN],exports:[DeepResearchButtonComponent]})],DeepResearchModule);var ng_zorro_antd_alert=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-alert.mjs"),antvFlow_componentngResource=__webpack_require__("./src/components/deerFlow/antvFlow.component.scss?ngResource"),antvFlow_componentngResource_default=__webpack_require__.n(antvFlow_componentngResource),es=__webpack_require__("./node_modules/@antv/x6/es/index.js"),x6_angular_shape_es=__webpack_require__("./node_modules/@antv/x6-angular-shape/es/index.js");let AntvFlowService=class AntvFlowService{_subject=new Subject.B;constructor(){}emit(data){this._subject.next(data)}subscribe(callback){this._subject.subscribe(callback)}static ctorParameters=()=>[]};AntvFlowService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],AntvFlowService);let AntvNodeComponent=class AntvNodeComponent{cdr;id="";title="";description;thought;isStreaming;isEnding;content;_antvFlowService=(0,core.inject)(AntvFlowService);constructor(cdr){this.cdr=cdr}ngOnInit(){}ngOnChanges(changes){(changes.title||changes.description)&&this.cdr.detectChanges()}onEnding(){this._antvFlowService.emit({type:"displayReport",data:this.id})}static ctorParameters=()=>[{type:core.ChangeDetectorRef}];static propDecorators={id:[{type:core.Input}],title:[{type:core.Input}],description:[{type:core.Input}],thought:[{type:core.Input}],isStreaming:[{type:core.Input}],isEnding:[{type:core.Input}],content:[{type:core.Input}]}};AntvNodeComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"my-node",template:'\n  <div class="card px-4 py-2 hover-lift">\n  <nz-alert *ngIf="title"\n      [nzType]="isStreaming?\'info\':\'success\'"\n      [nzMessage]="title"\n      [nzShowIcon]="isEnding"\n    ></nz-alert>\n  <markdown *ngIf="content" class="markdown-deep-research fade-in transition delay-300 duration-300"\n  [data]="content"></markdown>\n  \x3c!-- <markdown *ngIf="description" class="markdown-deep-research fade-in transition delay-300 duration-300"\n  [data]="description"></markdown> --\x3e\n  <small *ngIf="description" class="text-gray-500" [class.animate-pulse]="isStreaming">{{description}}</small>\n\n  \n\n  <small *ngIf="thought" class="text-gray-500" [class.animate-pulse]="isStreaming">{{thought}}</small>\n  <button sds-button nzType="link" *ngIf="isEnding" (click)="onEnding()">\n    <span nz-icon nzType="check-circle" nzTheme="fill" class="text-green-500"></span>\n    <a class="text-blue-500 underline" (click)="onEnding()">æŸ¥çœ‹æœ€ç»ˆå›žç­”</a>\n  </button>\n  </div>\n  ',imports:[ngx_markdown.NN,common_module_Dx7dWex5.MD,fesm2022_forms.YN,ng_zorro_antd_divider.g,ng_zorro_antd_alert.$],styles:[antvFlow_componentngResource_default()]})],AntvNodeComponent);let AntvFlowComponent=class AntvFlowComponent{key="";label="";store;graph;isDisplayReport=!1;report;injector=(0,core.inject)(core.Injector);http=(0,core.inject)(module_z3bvLlVg.Qq);_nzMessage=(0,core.inject)(ng_zorro_antd_message.xh);_deepResearchService=(0,core.inject)(DeepResearchService);_antvFlowService=(0,core.inject)(AntvFlowService);constructor(){}ngOnInit(){this.graph=new es.ke({container:document.getElementById("container"),autoResize:!0,panning:!0,mousewheel:{enabled:!0,modifiers:["ctrl","meta"]},connecting:{snap:!0},background:{color:"#f9f9f9"}}),this._antvFlowService.subscribe((res=>{if("displayReport"===res.type){this.isDisplayReport=!0;const reportMessage=this.store?.reportMessages?.find((message=>message.id===res.data));this.report=reportMessage?.content}}))}ngOnChanges(changes){changes.key&&this.http.post("http://localhost:3000/api/deerflow/play",{fileId:this.key}).subscribe((()=>{this._deepResearchService.setupStore(this.key),this.store=this._deepResearchService.store.get(this.key),this.store&&(this.store.setGraph(this.graph,this.key),this.graph.addNode({id:this.key,shape:"custom-angular-component-node",x:0,y:150,width:300,height:200,data:{ngArguments:{title:this.label,description:""}}}),this.store.responding||this.store.planMessages?.length||(this._init(),this.store.subscribe((res=>{const{type,data}=res;"report_message_stream"===res.type||res.type}))))}))}ngAfterViewInit(){(0,x6_angular_shape_es.kz)({shape:"custom-angular-component-node",width:200,height:100,content:AntvNodeComponent,injector:this.injector})}_init(){var _this=this;return(0,asyncToGenerator.A)((function*(){const stream=playStream("http://localhost:3000/api/deerflow");if(_this.store){_this.store.setResponding(!0);try{var _iteratorError,_iteratorAbruptCompletion=!1,_didIteratorError=!1;try{for(var _step,_iterator=(0,asyncIterator.A)(stream);_iteratorAbruptCompletion=!(_step=yield _iterator.next()).done;_iteratorAbruptCompletion=!1){const event=_step.value;if("message_end"===event.type){_this.store.setResponding(!1),console.log("this.store:",_this.store);break}_this.store.getMessage(event)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorAbruptCompletion&&null!=_iterator.return&&(yield _iterator.return())}finally{if(_didIteratorError)throw _iteratorError}}}catch(error){_this.store.setResponding(!1),console.log(error),_this._nzMessage.error("An error occurred while generating the response. Please try again.")}finally{_this.store.setResponding(!1)}}}))()}static ctorParameters=()=>[];static propDecorators={key:[{type:core.Input}],label:[{type:core.Input}]}};AntvFlowComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"antv-flow",template:'\n    <div class="h-[564px] border border-[#EAECF0] rounded-[10px] overflow-hidden">\n      <div id="container"></div>\n    </div>\n    <div class="report" *ngIf="isDisplayReport">\n\n    <markdown *ngIf="report" class="markdown-deep-research fade-in transition delay-300 duration-300"\n  [data]="report"></markdown>\n    </div>\n  ',standalone:!0,imports:[common_module_Dx7dWex5.MD,ngx_markdown.NN],styles:[antvFlow_componentngResource_default()]})],AntvFlowComponent);let DeerFlowComponent=class DeerFlowComponent{http;files=[];eventSource;platMessage;streamId="";threadId="";assistantId="";platformMessageId="";nzModal=(0,core.inject)(ng_zorro_antd_modal.N_);deepResearchService=(0,core.inject)(DeepResearchService);store;graph;injector=(0,core.inject)(core.Injector);currentKey="";currentLabel="";constructor(http){this.http=http}ngOnInit(){this.connectSSE(),this.http.get("http://localhost:3000/api/deerflow/files").subscribe((res=>{this.files=res}))}ngOnDestroy(){this.disconnectSSE()}play(key,label){this.http.post("http://localhost:3000/api/deerflow/play",{fileId:key}).subscribe((()=>{this.deepResearchService.setupStore(key),this.nzModal.create({nzTitle:label,nzContent:DeepResearchComponent,nzFooter:null,nzWidth:"80vw",nzCentered:!0,nzBodyStyle:{height:"80vh",overflow:"hidden auto",padding:"0"},nzMaskClosable:!1,nzData:{isPlay:!0,url:"http://localhost:3000/api/deerflow",streamId:this.streamId.startsWith("stream:")?this.streamId:`stream:${this.streamId}`,threadId:this.threadId,platformMessageId:key}})}))}playGraph(key,label){this.currentKey=key,this.currentLabel=label}connectSSE(withClose=!1){!withClose&&this.eventSource&&this.eventSource.close();try{this.eventSource=new EventSource("http://localhost:3000/api/deerflow"),this.eventSource.onmessage=event=>{const{type,content,uid}=JSON.parse(event.data);"connected"!=type&&("message_end"!=type?"message"==type&&(this.platMessage.answer+=content):this.platMessage.answerLoading=!1)}}catch(error){}}disconnectSSE(){this.eventSource&&(this.eventSource.close(),this.eventSource=null)}static ctorParameters=()=>[{type:module_z3bvLlVg.Qq}]};DeerFlowComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-deer-flow",template:'\n    <section>\n    <nz-alert\n      nzType="info"\n      nzMessage="éœ€è¦å¯åŠ¨æœåŠ¡å™¨"\n      nzShowIcon\n    ></nz-alert>\n      <div>\n        <h2>Files</h2>\n        <div class="flex gap-2 cursor-pointer">\n        @for (item of files; track $index) {\n            <p (click)="playGraph(item.key, item.label)">{{ item.label }}</p>\n          }\n        </div>\n      </div>\n    </section>\n    <antv-flow [key]="currentKey" [label]="currentLabel"></antv-flow>\n  ',imports:[DeepResearchModule,ng_zorro_antd_modal.U6,AntvFlowComponent,ng_zorro_antd_alert.$],styles:[deerFlow_component_default()]})],DeerFlowComponent)},"./src/components/search-box/search-box.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=Omhvc3R7ZGlzcGxheTppbmxpbmUtZmxleDtoZWlnaHQ6IDI4cHg7Ym94LXNpemluZzogY29udGVudC1ib3g7fQ%3D%3D!./src/components/search-box/search-box.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: inline-flex;\n  height: 28px;\n  box-sizing: content-box;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/search-tag/search-tag.component.ts.scss?ngResource!=!./node_modules/@ngtools/webpack/src/loaders/inline-resource.js?data=CiAgICA6aG9zdHsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDI4cHg7CiAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIH0KICAgIC50YWctZ3JvdXAgewogICAgICBtaW4td2lkdGg6IDIwMHB4OwogICAgICBtYXgtd2lkdGg6IDMwMHB4OwogICAgfQogICAgLnRhZy1pdGVtIHsKICAgICAgbWFyZ2luOiAwOwogICAgfQogICAgLmljb257CiAgICAgIGNvbG9yOiAjZDlkOWQ5OwogICAgfQogICAg!./src/components/search-tag/search-tag.component.ts":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n  width: 100%;\n  height: 28px;\n  text-align: left;\n  font-size: 14px;\n}\n\n.tag-group {\n  min-width: 200px;\n  max-width: 300px;\n}\n\n.tag-item {\n  margin: 0;\n}\n\n.icon {\n  color: #d9d9d9;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/upload/upload.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/upload/upload.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>UploadComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var upload_componentngResource=__webpack_require__("./src/components/upload/upload.component.scss?ngResource"),upload_componentngResource_default=__webpack_require__.n(upload_componentngResource),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),module_z3bvLlVg=__webpack_require__("./node_modules/@angular/common/fesm2022/module-z3bvLlVg.mjs"),ng_zorro_antd_button=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-button.mjs"),ng_zorro_antd_upload=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-upload.mjs"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),ng_zorro_antd_icon=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-icon.mjs"),ng_zorro_antd_message=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-message.mjs");let UploadComponent=class UploadComponent{messageService;http;ethicsFiles=[];accept="image/*, .pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel";constructor(messageService,http){this.messageService=messageService,this.http=http}ngOnInit(){}customRequestUploadFile=file=>this._uploadFile(file).pipe((0,tap.M)((event=>{if(event.type===module_z3bvLlVg.hv.UploadProgress){const percent=Math.round(100*event.loaded/(event.total||1));file.onProgress&&file.onProgress({percent},file.file)}else event instanceof module_z3bvLlVg.cS&&file.onSuccess&&file.onSuccess(event.body,file.file,file.file)})),(0,tap.M)({error:error=>{file.onError&&file.onError(error,file.file)}})).subscribe();handleChange(info){this.ethicsFiles=info.fileList.map((item=>(item.isLoading="uploading"===item.status,item)))}fileDelete(file){this.ethicsFiles=this.ethicsFiles.filter((item=>item.uid!==file.uid))}_uploadFile(file){const formData=new FormData;return formData.append("file",file.file),this.http.post("http://localhost:3000/api/upload",formData,{reportProgress:!0,observe:"events"})}static ctorParameters=()=>[{type:ng_zorro_antd_message.xh},{type:module_z3bvLlVg.Qq}]};UploadComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"upload",template:'<nz-upload [nzShowUploadList]="false"\n           [nzFileList]="ethicsFiles"\n           [nzCustomRequest]="customRequestUploadFile"\n           [nzAccept]="accept"\n           (nzChange)="handleChange($event)">\n  <button nz-button\n          [disabled]="ethicsFiles.length===10"\n          nzType="primary"><i nz-icon\n       nzType="upload"></i>ä¸Šä¼ é™„ä»¶</button>\n</nz-upload>\n<aside class="flex-1">\n  <ul class="files flex-1">\n    <li *ngFor="let attachment of ethicsFiles"\n        class="flex gap-md"\n        align="center"\n        justify="space-between">\n      <span class="name">{{attachment.name}}</span>\n      <span class="actions">\n        <span *ngIf="attachment.isLoading"\n              nz-icon\n              nzType="loading"\n              nzTheme="outline"></span>\n        <span *ngIf="!attachment.isLoading"\n              nz-icon\n              nzType="delete"\n              (click)="fileDelete(attachment)"></span>\n      </span>\n    </li>\n  </ul>\n</aside>',imports:[common_module_Dx7dWex5.MD,ng_zorro_antd_upload.SE,ng_zorro_antd_button.Zw,ng_zorro_antd_icon.Y3],styles:[upload_componentngResource_default()]})],UploadComponent)},"./src/pipes/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{sy:()=>FileSizePipe,D9:()=>TranslatePipe});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),ng_zorro_antd_i18n=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-i18n.mjs");let TranslatePipe=class TranslatePipe{i18n;value;path;lastResult;constructor(i18n){this.i18n=i18n,this.i18n.localeChange.subscribe((()=>{this.path?.trim()&&(this.lastResult=this.i18n.translate(this.path))}))}transform(value,...args){return this.path=args[0],this.value=value,this.path?.trim()?(this.lastResult=this.i18n.translate(this.path),this.lastResult):value?.trim()?(this.lastResult=this.i18n.translate(value),this.lastResult):""}static ctorParameters=()=>[{type:ng_zorro_antd_i18n.Og}]};TranslatePipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"translate",pure:!1})],TranslatePipe);let FormatNumberPipe=class FormatNumberPipe{transform(value,decimals=1){if(null==value)return"0";if(value>=1e9){const num=value/1e9;return this.formatWithDecimals(num,decimals)+"B"}if(value>=1e6){const num=value/1e6;return this.formatWithDecimals(num,decimals)+"M"}if(value>=1e3){const num=value/1e3;return this.formatWithDecimals(num,decimals)+"K"}return value.toString()}formatWithDecimals(num,decimals){const rounded=Math.round(num*Math.pow(10,decimals))/Math.pow(10,decimals);return rounded%1==0?rounded.toString():rounded.toFixed(decimals)}};FormatNumberPipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"formatNumber"})],FormatNumberPipe);const mb=1048576,gb=1024*mb;let FileSizePipe=class FileSizePipe{transform(size){return size?size<1024?`${size}B`:size>=1024&&size<mb?`${(size/1024).toFixed(2)}K`:size>=mb&&size<=gb?`${(size/mb).toFixed(2)}M`:size>=gb?`${(size/gb).toFixed(2)}G`:"":"0K"}};FileSizePipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"fileSize"})],FileSizePipe)},"./src/utils/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S$:()=>ECmpTypeOperatorMap,O0:()=>EOperator,WU:()=>MyValidators,FU:()=>certificateCodeValidator,r$:()=>decimalNumberValidator,nh:()=>isAllChecked,fZ:()=>isHalfChecked,Bu:()=>landlineAndPhoneValidator,rm:()=>noEmptyValidator,VD:()=>nonNegativeIntegerValidator,_o:()=>onlyChineseValidator,II:()=>operators,U1:()=>phoneNumberValidator,gG:()=>positiveIntegerValidator,IO:()=>streamToJSON,gZ:()=>uuidv4});var fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs");const REGEXP={phoneNumber:/^1[3-9]\d{9}$/,landlineAndPhone:/^((0\d{2,3}-\d{7,8})|(1[3-9]\d{9}))$/,nonNegativeInteger:/^\d+$/,positiveInteger:/^[1-9]\d*$/,decimalNumber:/^[0-9]+(\.[0-9]+)?$/,empty:/^\s+$/,onlyChinese:/^[\u4e00-\u9fa5_a-zA-Z]+$/,certificateCode:/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}[0-9Xx]$)/,mailbox:/^([a-zA-Z0-9_.-]+)@([a-zA-Z0-9_.-]+).([a-zA-Z.]{2,6})$/};function noEmptyValidator(){return control=>{const value=control.value,errorTip={noEmpty:{value}};return!value||REGEXP.empty.test(value)?errorTip:null}}function nonNegativeIntegerValidator(){return control=>{const value=control.value,errorTip={nonNegativeInteger:{value}};return value&&REGEXP.nonNegativeInteger.test(value)?null:errorTip}}function onlyChineseValidator(){return control=>{const value=control.value,errorTip={onlyChinese:{value}};return value&&!REGEXP.onlyChinese.test(value)?errorTip:null}}function phoneNumberValidator(){return control=>{const value=control.value,errorTip={phoneNumber:{value}};return value&&!REGEXP.phoneNumber.test(value)?errorTip:null}}function landlineAndPhoneValidator(){return control=>{const value=control.value,errorTip={landlineAndPhone:{value}};return value&&!REGEXP.landlineAndPhone.test(value)?errorTip:null}}function certificateCodeValidator(){return control=>{const value=control.value,errorTip={certificateCode:{value}};return value&&!REGEXP.certificateCode.test(value)?errorTip:null}}function positiveIntegerValidator(){return control=>{const value=control.value,errorTip={positiveInteger:{value}};return value&&REGEXP.positiveInteger.test(value)?null:errorTip}}function decimalNumberValidator(){return control=>{const value=control.value,errorTip={decimalNumber:{value}};return value&&REGEXP.decimalNumber.test(value)?null:errorTip}}class MyValidators extends fesm2022_forms.k0{static minLength(minLength){return control=>null===fesm2022_forms.k0.minLength(minLength)(control)?null:{minlength:{"zh-cn":`æœ€å°é•¿åº¦ä¸º ${minLength}`,en:`MinLength is ${minLength}`}}}static maxLength(maxLength){return control=>null===fesm2022_forms.k0.maxLength(maxLength)(control)?null:{maxlength:{"zh-cn":`æœ€å¤§é•¿åº¦ä¸º ${maxLength}`,en:`MaxLength is ${maxLength}`}}}static myName(control){const value=control.value;return/^[ ]*$/g.test(value)?{name:{"zh-cn":"å§“åä¸å¯ä¸ºç©º",en:"usernName Cannot be empty"}}:null}static mobile(control){const value=control.value;return function isEmptyInputValue(value){return null==value||0===value.length}(value)||function isMobile(value){return"string"==typeof value&&/^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/.test(value)}(value)?null:{phoneNumber:{"zh-cn":"æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®",en:"Mobile phone number is not valid"}}}static socialUnifiedCode(control){const value=control.value;return/^(([0-9A-Za-z]{15})|([0-9A-Za-z]{18})|([0-9A-Za-z]{20}))$/.test(value)?null:{name:{"zh-cn":"ç¤¾ä¼šä¿¡ç”¨ä»£ç æ ¼å¼é”™è¯¯",en:"invalid socialUnifiedCode"}}}static validateIdCardNo(idCard){let isValidCard=!1;if(/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(idCard)&&18===idCard.length){const idCardWi=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),idCardY=new Array(1,0,10,9,8,7,6,5,4,3,2);let idCardWiSum=0;for(let i=0;i<17;i++)idCardWiSum+=+idCard.substring(i,i+1)*idCardWi[i];const idCardMod=idCardWiSum%11,idCardLast=idCard.substring(17);2==+idCardMod?"X"!==idCardLast&&"x"!==idCardLast||(isValidCard=!0):+idCardLast===idCardY[idCardMod]&&(isValidCard=!0)}return isValidCard?null:{name:{"zh-cn":"æ‚¨è¾“å…¥çš„èº«ä»½è¯å·æ ¼å¼æœ‰è¯¯",en:"invalid idCardNo"}}}static mailboxValidator(){return control=>{const value=control.value,errorTip={mailbox:{value}};return value&&!REGEXP.mailbox.test(value)?errorTip:null}}}function uuidv4(){var d=(new Date).getTime(),d2="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random();return d>0?(r=(d+r)%16|0,d=Math.floor(d/16)):(r=(d2+r)%16|0,d2=Math.floor(d2/16)),("x"===c?r:3&r|8).toString(16)}))}var EOperator,ECmpTypeOperatorMap;!function(EOperator){EOperator[EOperator.GreaterThan=0]="GreaterThan",EOperator[EOperator.LessThan=1]="LessThan",EOperator[EOperator.EqualTo=2]="EqualTo",EOperator[EOperator.NotEqualTo=3]="NotEqualTo",EOperator[EOperator.Between=4]="Between",EOperator[EOperator.Contains=5]="Contains",EOperator[EOperator.NotContains=6]="NotContains"}(EOperator||(EOperator={})),function(ECmpTypeOperatorMap){ECmpTypeOperatorMap[ECmpTypeOperatorMap.number=1]="number",ECmpTypeOperatorMap[ECmpTypeOperatorMap.char=2]="char",ECmpTypeOperatorMap[ECmpTypeOperatorMap.select_single=3]="select_single",ECmpTypeOperatorMap[ECmpTypeOperatorMap.select_multiple=4]="select_multiple",ECmpTypeOperatorMap[ECmpTypeOperatorMap.select_cascader=5]="select_cascader",ECmpTypeOperatorMap[ECmpTypeOperatorMap.date=6]="date"}(ECmpTypeOperatorMap||(ECmpTypeOperatorMap={}));const operators=[{value:EOperator.GreaterThan,label:"å¤§äºŽ",dataTypes:[ECmpTypeOperatorMap.number,ECmpTypeOperatorMap.date],isRange:!1},{value:EOperator.LessThan,label:"å°äºŽ",dataTypes:[ECmpTypeOperatorMap.number,ECmpTypeOperatorMap.date],isRange:!1},{value:EOperator.EqualTo,label:"ç­‰äºŽ",dataTypes:[ECmpTypeOperatorMap.number,ECmpTypeOperatorMap.char,ECmpTypeOperatorMap.select_single,ECmpTypeOperatorMap.select_cascader],isRange:!1},{value:EOperator.NotEqualTo,label:"ä¸ç­‰äºŽ",dataTypes:[ECmpTypeOperatorMap.number,ECmpTypeOperatorMap.char,ECmpTypeOperatorMap.select_single,ECmpTypeOperatorMap.select_cascader],isRange:!1},{value:EOperator.Between,label:"èŒƒå›´",dataTypes:[ECmpTypeOperatorMap.number,ECmpTypeOperatorMap.date],isRange:!0},{value:EOperator.Contains,label:"åŒ…å«",dataTypes:[ECmpTypeOperatorMap.char,ECmpTypeOperatorMap.select_multiple],isRange:!1},{value:EOperator.NotContains,label:"ä¸åŒ…å«",dataTypes:[ECmpTypeOperatorMap.char,ECmpTypeOperatorMap.select_multiple],isRange:!1}];var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");function streamToJSON(_x){return _streamToJSON.apply(this,arguments)}function _streamToJSON(){return(_streamToJSON=(0,asyncToGenerator.A)((function*(inputFile){try{const lines=(yield inputFile.text()).split("\n"),events=[];let currentEvent=null,currentData=null;for(let i=0;i<lines.length;i++){const line=lines[i].trim();if(line.startsWith("event:")){if(currentEvent&&currentData)try{const parsedData=JSON.parse(currentData);events.push({event:currentEvent,data:parsedData})}catch(e){events.push({event:currentEvent,data:currentData})}currentEvent=line.substring(6).trim(),currentData=null}else line.startsWith("data:")&&(currentData=line.substring(5).trim())}if(currentEvent&&currentData)try{const parsedData=JSON.parse(currentData);events.push({event:currentEvent,data:parsedData})}catch(e){events.push({event:currentEvent,data:currentData})}let output="export const streamData = [\n";return events.forEach(((eventObj,index)=>{output+="  {\n",output+=`    event: "${eventObj.event}",\n`,"string"==typeof eventObj.data?output+=`    data: "${eventObj.data.replace(/"/g,'\\"')}"\n`:output+=`    data: ${JSON.stringify(eventObj.data,null,6)}\n`,index<events.length-1?output+="  },\n":output+="  }\n"})),output+="];\n",output}catch(error){return console.error("è½¬æ¢è¿‡ç¨‹ä¸­å‡ºçŽ°é”™è¯¯:",error),""}}))).apply(this,arguments)}function getCheckedCount(list,checkedSelector){return list.reduce(((acc,cur)=>function selectBy(item,selector){return"function"==typeof selector?selector(item):Reflect.get(item,selector)}(cur,checkedSelector)?acc+1:acc),0)}function _isAllChecked(checkedCount,totalCount){return!(!checkedCount||!totalCount)&&totalCount===checkedCount}function isAllChecked(list,checkedSelector){return _isAllChecked(getCheckedCount(list,checkedSelector),list.length)}function _isHalfChecked(checkedCount,totalCount){return!(!checkedCount||!totalCount)&&totalCount!==checkedCount}function isHalfChecked(list,checkedSelector){return _isHalfChecked(getCheckedCount(list,checkedSelector),list.length)}}}]);