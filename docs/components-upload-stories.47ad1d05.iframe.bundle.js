(self.webpackChunkcomponents_angular=self.webpackChunkcomponents_angular||[]).push([[6779],{"./node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map((function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content})).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}},"./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-core-overlay.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$_:()=>NzOverlayModule,DN:()=>DEFAULT_DATE_PICKER_POSITIONS,G5:()=>overlayZIndexSetter,Js:()=>DEFAULT_TOOLTIP_POSITIONS,Qx:()=>DEFAULT_CASCADER_POSITIONS,jj:()=>getPlacementName,l$:()=>DATE_PICKER_POSITION_MAP,pn:()=>POSITION_MAP,vT:()=>NzConnectedOverlayDirective});var _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/overlay-module-BUj0D19H.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),ng_zorro_antd_core_services__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-core-services.mjs");const POSITION_MAP={top:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},DEFAULT_TOOLTIP_POSITIONS=[POSITION_MAP.top,POSITION_MAP.right,POSITION_MAP.bottom,POSITION_MAP.left],DEFAULT_CASCADER_POSITIONS=[POSITION_MAP.bottomLeft,POSITION_MAP.bottomRight,POSITION_MAP.topLeft,POSITION_MAP.topRight];new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"}),POSITION_MAP.bottomLeft,new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"top"});function getPlacementName(position){for(const placement in POSITION_MAP)if(position.connectionPair.originX===POSITION_MAP[placement].originX&&position.connectionPair.originY===POSITION_MAP[placement].originY&&position.connectionPair.overlayX===POSITION_MAP[placement].overlayX&&position.connectionPair.overlayY===POSITION_MAP[placement].overlayY)return placement}const DATE_PICKER_POSITION_MAP={bottomLeft:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},void 0,2),topLeft:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},void 0,-2),bottomRight:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"},void 0,2),topRight:new _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.g({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"},void 0,-2)},DEFAULT_DATE_PICKER_POSITIONS=[DATE_PICKER_POSITION_MAP.bottomLeft,DATE_PICKER_POSITION_MAP.topLeft,DATE_PICKER_POSITION_MAP.bottomRight,DATE_PICKER_POSITION_MAP.topRight];class NzConnectedOverlayDirective{cdkConnectedOverlay;nzDestroyService;nzArrowPointAtCenter=!1;constructor(cdkConnectedOverlay,nzDestroyService){this.cdkConnectedOverlay=cdkConnectedOverlay,this.nzDestroyService=nzDestroyService,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop",this.cdkConnectedOverlay.positionChange.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.Q)(this.nzDestroyService)).subscribe((position=>{this.nzArrowPointAtCenter&&this.updateArrowPosition(position)}))}updateArrowPosition(position){const originRect=this.getOriginRect(),placement=getPlacementName(position);let offsetX=0,offsetY=0;"topLeft"===placement||"bottomLeft"===placement?offsetX=originRect.width/2-14:"topRight"===placement||"bottomRight"===placement?offsetX=-(originRect.width/2-14):"leftTop"===placement||"rightTop"===placement?offsetY=originRect.height/2-10:"leftBottom"!==placement&&"rightBottom"!==placement||(offsetY=-(originRect.height/2-10)),this.cdkConnectedOverlay.offsetX===offsetX&&this.cdkConnectedOverlay.offsetY===offsetY||(this.cdkConnectedOverlay.offsetY=offsetY,this.cdkConnectedOverlay.offsetX=offsetX,this.cdkConnectedOverlay.overlayRef.updatePosition())}getFlexibleConnectedPositionStrategyOrigin(){return this.cdkConnectedOverlay.origin instanceof _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.C?this.cdkConnectedOverlay.origin.elementRef:this.cdkConnectedOverlay.origin}getOriginRect(){const origin=this.getFlexibleConnectedPositionStrategyOrigin();if(origin instanceof _angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef)return origin.nativeElement.getBoundingClientRect();if(origin instanceof Element)return origin.getBoundingClientRect();const width=origin.width||0,height=origin.height||0;return{top:origin.y,bottom:origin.y+height,left:origin.x,right:origin.x+width,height,width}}static ɵfac=function NzConnectedOverlayDirective_Factory(__ngFactoryType__){return new(__ngFactoryType__||NzConnectedOverlayDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.b),_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](ng_zorro_antd_core_services__WEBPACK_IMPORTED_MODULE_3__.y4))};static ɵdir=_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineDirective"]({type:NzConnectedOverlayDirective,selectors:[["","cdkConnectedOverlay","","nzConnectedOverlay",""]],inputs:{nzArrowPointAtCenter:[2,"nzArrowPointAtCenter","nzArrowPointAtCenter",_angular_core__WEBPACK_IMPORTED_MODULE_2__.booleanAttribute]},exportAs:["nzConnectedOverlay"],features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵProvidersFeature"]([ng_zorro_antd_core_services__WEBPACK_IMPORTED_MODULE_3__.y4])]})}("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵsetClassMetadata"](NzConnectedOverlayDirective,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Directive,args:[{selector:"[cdkConnectedOverlay][nzConnectedOverlay]",exportAs:"nzConnectedOverlay",providers:[ng_zorro_antd_core_services__WEBPACK_IMPORTED_MODULE_3__.y4]}]}],(()=>[{type:_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_0__.b},{type:ng_zorro_antd_core_services__WEBPACK_IMPORTED_MODULE_3__.y4}]),{nzArrowPointAtCenter:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.Input,args:[{transform:_angular_core__WEBPACK_IMPORTED_MODULE_2__.booleanAttribute}]}]});class NzOverlayModule{static ɵfac=function NzOverlayModule_Factory(__ngFactoryType__){return new(__ngFactoryType__||NzOverlayModule)};static ɵmod=_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineNgModule"]({type:NzOverlayModule,imports:[NzConnectedOverlayDirective],exports:[NzConnectedOverlayDirective]});static ɵinj=_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjector"]({})}function overlayZIndexSetter(overlayRef,zIndex){zIndex&&(overlayRef._host.style.zIndex=`${zIndex}`)}("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵsetClassMetadata"](NzOverlayModule,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_2__.NgModule,args:[{imports:[NzConnectedOverlayDirective],exports:[NzConnectedOverlayDirective]}]}],null,null)},"./src/components/upload/upload.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/components/upload/upload.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>UploadComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var upload_componentngResource=__webpack_require__("./src/components/upload/upload.component.scss?ngResource"),upload_componentngResource_default=__webpack_require__.n(upload_componentngResource),common_module_Dx7dWex5=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),module_z3bvLlVg=__webpack_require__("./node_modules/@angular/common/fesm2022/module-z3bvLlVg.mjs"),ng_zorro_antd_button=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-button.mjs"),ng_zorro_antd_upload=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-upload.mjs"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),ng_zorro_antd_icon=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-icon.mjs"),ng_zorro_antd_message=__webpack_require__("./node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-message.mjs");let UploadComponent=class UploadComponent{messageService;http;ethicsFiles=[];accept="image/*, .pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel";constructor(messageService,http){this.messageService=messageService,this.http=http}ngOnInit(){}customRequestUploadFile=file=>this._uploadFile(file).pipe((0,tap.M)((event=>{if(event.type===module_z3bvLlVg.hv.UploadProgress){const percent=Math.round(100*event.loaded/(event.total||1));file.onProgress&&file.onProgress({percent},file.file)}else event instanceof module_z3bvLlVg.cS&&file.onSuccess&&file.onSuccess(event.body,file.file,file.file)})),(0,tap.M)({error:error=>{file.onError&&file.onError(error,file.file)}})).subscribe();handleChange(info){this.ethicsFiles=info.fileList.map((item=>(item.isLoading="uploading"===item.status,item)))}fileDelete(file){this.ethicsFiles=this.ethicsFiles.filter((item=>item.uid!==file.uid))}_uploadFile(file){const formData=new FormData;return formData.append("file",file.file),this.http.post("http://localhost:3000/api/upload",formData,{reportProgress:!0,observe:"events"})}static ctorParameters=()=>[{type:ng_zorro_antd_message.xh},{type:module_z3bvLlVg.Qq}]};UploadComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"upload",template:'<nz-upload [nzShowUploadList]="false"\n           [nzFileList]="ethicsFiles"\n           [nzCustomRequest]="customRequestUploadFile"\n           [nzAccept]="accept"\n           (nzChange)="handleChange($event)">\n  <button nz-button\n          [disabled]="ethicsFiles.length===10"\n          nzType="primary"><i nz-icon\n       nzType="upload"></i>上传附件</button>\n</nz-upload>\n<aside class="flex-1">\n  <ul class="files flex-1">\n    <li *ngFor="let attachment of ethicsFiles"\n        class="flex gap-md"\n        align="center"\n        justify="space-between">\n      <span class="name">{{attachment.name}}</span>\n      <span class="actions">\n        <span *ngIf="attachment.isLoading"\n              nz-icon\n              nzType="loading"\n              nzTheme="outline"></span>\n        <span *ngIf="!attachment.isLoading"\n              nz-icon\n              nzType="delete"\n              (click)="fileDelete(attachment)"></span>\n      </span>\n    </li>\n  </ul>\n</aside>',imports:[common_module_Dx7dWex5.MD,ng_zorro_antd_upload.SE,ng_zorro_antd_button.Zw,ng_zorro_antd_icon.Y3],styles:[upload_componentngResource_default()]})],UploadComponent)},"./stories/components/upload.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,DocumentOnly:()=>DocumentOnly,ImageOnly:()=>ImageOnly,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Components/Upload",component:__webpack_require__("./src/components/upload/upload.component.ts").v,tags:["autodocs"],argTypes:{accept:{control:"text",description:"接受的文件类型",defaultValue:"image/*, .pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}}},Default={args:{accept:"image/*, .pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}},ImageOnly={args:{accept:"image/*"}},DocumentOnly={args:{accept:".pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"}},__namedExportsOrder=["Default","ImageOnly","DocumentOnly"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    accept: 'image/*, .pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel'\n  }\n}",...Default.parameters?.docs?.source}}},ImageOnly.parameters={...ImageOnly.parameters,docs:{...ImageOnly.parameters?.docs,source:{originalSource:"{\n  args: {\n    accept: 'image/*'\n  }\n}",...ImageOnly.parameters?.docs?.source}}},DocumentOnly.parameters={...DocumentOnly.parameters,docs:{...DocumentOnly.parameters?.docs,source:{originalSource:"{\n  args: {\n    accept: '.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n  }\n}",...DocumentOnly.parameters?.docs?.source}}}}}]);